setTimeout(function(){function t(){this.setSettings=function(t){for(var e=0;24>e;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var r=this.b+this.c+this.e;if(.18>r){var a=.18/r;this.b*=a,this.c*=a,this.e*=a}}}function e(){this._params=new t;var e,r,a,o,f,n,i,c,u,v,l,b;this.reset=function(){var t=this._params;o=100/(t.f*t.f+.001),f=100/(t.g*t.g+.001),n=1-t.h*t.h*t.h*.01,i=-t.i*t.i*t.i*1e-6,t.a||(l=.5-t.n/2,b=5e-5*-t.o),c=1+t.l*t.l*(t.l>0?-.9:10),u=0,v=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.reset();var t=this._params;return e=t.b*t.b*1e5,r=t.c*t.c*1e5,a=t.e*t.e*1e5+12,3*((e+r+a)/3|0)},this.synthWave=function(t,m){var s=this._params,d=1!=s.s||s.v,h=s.v*s.v*.1,E=1+3e-4*s.w,x=s.s*s.s*s.s*.1,S=1+1e-4*s.t,R=1!=s.s,A=s.x*s.x,g=s.g,y=s.q||s.r,T=s.r*s.r*s.r*.2,D=s.q*s.q*(s.q<0?-1020:1020),N=s.p?((1-s.p)*(1-s.p)*2e4|0)+32:0,p=s.d,M=s.j/2,C=s.k*s.k*.01,U=s.a,w=e,W=1/e,_=1/r,L=1/a,Q=5/(1+s.u*s.u*20)*(.01+x);Q>.8&&(Q=.8),Q=1-Q;for(var F,k,I,P,O,G,B=!1,X=0,j=0,Z=0,Y=0,J=0,z=0,q=0,H=0,V=0,K=0,$=new Array(1024),te=new Array(32),ee=$.length;ee--;)$[ee]=0;for(var ee=te.length;ee--;)te[ee]=2*Math.random()-1;for(var ee=0;m>ee;ee++){if(B)return ee;if(N&&++V>=N&&(V=0,this.reset()),v&&++u>=v&&(v=0,o*=c),n+=i,o*=n,o>f&&(o=f,g>0&&(B=!0)),k=o,M>0&&(K+=C,k*=1+Math.sin(K)*M),k|=0,8>k&&(k=8),U||(l+=b,0>l?l=0:l>.5&&(l=.5)),++j>w)switch(j=0,++X){case 1:w=r;break;case 2:w=a}switch(X){case 0:Z=j*W;break;case 1:Z=1+2*(1-j*_)*p;break;case 2:Z=1-j*L;break;case 3:Z=0,B=!0}y&&(D+=T,I=0|D,0>I?I=-I:I>1023&&(I=1023)),d&&E&&(h*=E,1e-5>h?h=1e-5:h>.1&&(h=.1)),G=0;for(var re=8;re--;){if(q++,q>=k&&(q%=k,3==U))for(var ae=te.length;ae--;)te[ae]=2*Math.random()-1;switch(U){case 0:O=l>q/k?.5:-.5;break;case 1:O=1-q/k*2;break;case 2:P=q/k,P=6.28318531*(P>.5?P-1:P),O=1.27323954*P+.405284735*P*P*(0>P?1:-1),O=.225*((0>O?-1:1)*O*O-O)+O;break;case 3:O=te[Math.abs(32*q/k|0)]}d&&(F=z,x*=S,0>x?x=0:x>.1&&(x=.1),R?(J+=(O-z)*x,J*=Q):(z=O,J=0),z+=J,Y+=z-F,Y*=1-h,O=Y),y&&($[H%1024]=O,O+=$[(H-I+1024)%1024],H++),G+=O}G*=.125*Z*A,t[ee]=G>=1?32767:-1>=G?-32768:32767*G|0}return m}}function r(t,e){if(!(0>=e)){var r=new Audio;r.src=t,r.volume=e||1,r.play()}}function a(t){return Math.pow(T(80,10,f(t,c(s()))),2)}function o(t){return t[~~(Math.random()*t.length)]}function f(t,e){var r=t[0]-e[0],a=t[1]-e[1];return Math.sqrt(r*r+a*a)}function n(t,e){for(var r=0;r<t.length;r+=4)e[r/4]=~~(.5+9*t[r]/256)}function i(t,e,r){return Math.max(t,Math.min(r,e))}function c(t){return[(ne[0]+t[0])/ye,(ne[1]+t[1])/ye]}function u(t){ne=[i(-fe[0]/2,fe[0]/2+ye*Ee[0]-fe[0],t[0]),i(-fe[1]/2,ye*Ee[1]-fe[1]/2,t[1])]}function v(t){return[t.clientX*fe[0]/oe[0],fe[1]-t.clientY*fe[1]/oe[1]]}function l(){camStart=ie=ce=ue=0,V.style.cursor=K?"default":"pointer"}function b(t){var e=8*ye,r=fe[1]/2-14*ye-e/2;if(r-5<t[1]&&t[1]<r+e+5){var a=8*ye+8,o=(fe[0]-4*a)/2,f=~~((t[0]-o)/a);if(f>=0&&4>f)return f}return-1}function m(t){return f(s(),t)<8*ye}function s(){return[fe[0]/2,fe[1]/2]}function d(t,e,r){return 256*~~(256*T(-1,1,t))+~~(256*T(-1,1,e))+~~(256*T(-1,1,r))/256}function h(){var t=_e[32];t&&!K&&w(),K&&!$&&(t&&(pe=1),_e[87]||_e[90]?Me=0:_e[88]?Me=1:_e[67]?Me=2:_e[86]&&(Me=3),pe||!ie||ce||(pe=1),ve=c(s()))}function E(){var t=6,e=_e[39]-_e[37],r=_e[38]-_e[40],a=e+"_"+r;a!=We&&(We=a,Le=Date.now()),Te=[t*e,t*r]}function x(t){return 1==t||4==t||5==t}function S(t,e){var r=this;r.p=t,r.t=e||[],r.v=[0,0],r.T=r.dt=0}function R(t,e,r){var a=~~(t.p[0]-Ge)+e-ge;if(0>a||a>=Ee[0])return 1;var o=~~(t.p[1]-Be)+r;return 0>o||o>=Ee[1]?1:Ae[a+o*Ee[0]]}function A(t){function e(e){var r,a,o,f,n=[],i=[];for(a=Ge,o=Be;a>=0&&Pe>a;a+=e){for(o==Oe&&o--,-1==o&&o++;Oe>o&&x(R(t,a,o));)o++;if(Oe>o)for(;o>=0&&!x(R(t,a,o));)o--;i.push(o)}var c=0;for(f=0,a=Ge,r=1;a>=0&&Pe>a;a+=e,++f){var u,v,l,b=i[f],m=R(t,a,Be),s=[0,0,0,0,0,0,0,0,0],d=[0,0,0,0,0,0,0,0,0],h=new Uint8Array(Oe);for(o=0;Oe>o;++o)h[o]=R(t,a,o);for(l=((Ge-1>f?i[f+1]:b)+(Ge-2>f?i[f+2]:b))/2-b,u=b+1;Oe>u&&!x(h[u]);u++);for(v=u-b-1,(4>v||-4>l||l>4)&&(r=0),o=b;u>=o;++o)s[h[o]]++;for(o=0;Oe>o;++o)d[h[o]]++;n.push({f:b,c:u,h:v,s:l,e:s,v:d,a:r,l:m}),r&&c++}return n.a=c,n}var r=de+"_"+~~t.p[0]+"_"+~~t.p[1];t.h!=r&&(t.h=r,t.sl=e(-1),t.sr=e(1))}function g(t,e){t.d=1+e,t.T=Date.now(),r(Z[e],a(t.p)),r(o(z))}function y(t,e){if(!(t.d>0)){A(t);var f,n,i,c=t.sl[0],u=c.f,v=Be-(u+1);if(c.e[2])for(n=0;5>=n;++n)if(2==R(t,Ge,Be+n)){g(t,2);break}if(!v&&t.v[1]<-3)return g(t,0);if(v){if(u>Be&&-5>v){var l=0,b=0;for(i=0;5>i;++i)l==i&&x(t.sl[i].l)&&l++,b==i&&x(t.sr[i].l)&&b++;if(5!=l)t.p[0]-=l,t.v[0]>0&&(t.v[0]*=-.5);else{if(5==b)return g(t,1);t.p[0]+=l,t.v[0]<0&&(t.v[0]*=-.5)}}v>0?t.v[1]-=.12:(t.p[1]-=v,t.v=[0,0])}else t.v[1]=0,t.p[1]=~~t.p[1];if(t.p[1]<0)return g(t,0);A(t);var m=Date.now();if(!t.d&&(0==t.t.length||"n"!=t.t[0]&&m>t.dt)){m>t.dt&&(t.t=[]),t.dt=m+500+500*Math.random();var s,d=0,h=Ge;for(i=0;h>i;++i){if(t.sl[i]&&t.sl[i].e[3]){d=-1,s=i;break}if(t.sr[i]&&t.sr[i].e[3]){d=1,s=i;break}}var E,S=0,y=Ge;for(i=0;y>i;++i){if(t.sl[i]&&t.sl[i].v[2]){S=-1,E=i;break}if(t.sr[i]&&t.sr[i].v[2]){S=1,E=i;break}}var D,N,p,M=[e[0]-t.p[0],e[1]-t.p[1]],C=0;for(i=0;Ge>i;++i){var U=t.sr[i];if(!U.a){U.s<-3&&(C=1,N=[i,U.f]);break}}if(C)for(i=N[0]+2;Ge>i;++i){var U=t.sr[i],w=U.f-N[1];if(-1!=U.f&&w>=-8&&5>=w){U.h>=4&&(D=1,p=[i,U.f]);break}}f=~~t.p[0],n=~~t.p[1];var W=[];if((0>S||!S&&Math.random()<.5)&&C&&D){var _=.1+.09*(p[0]-N[0]),L=1;W=["r",.7,f+N[0]-1,"j",_,L,"n",500,0]}else if(S)W=["r",-1*S,f+(0>S?30:-30)+10*(.5-Math.random()),"w",-.5*S,f+(0>S?50:-50)+10*(.5-Math.random())];else{var U=Math.random(),Q=d&&8>s,F=Q&&Math.random()<.7?d:Math.random()<.1?t.sr.a-t.sl.a:Math.random()<.1&&Math.abs(M[0])>80?M[0]:1;W=.9>U||Q?["w",(F>=0?1:-1)*(.4-(Q?.3*T(8,0,s):0)),f+(F>=0?t.sr.a-1:-t.sl.a+1)]:["n",800,0]}t.t=t.t.concat(W)}if(0==v){var i,k=1;for(i=0;i<t.t.length&&k;i+=3){k=0;var I=t.t[i],P=t.t[i+1],O=t.t[i+2];if("n"==I&&(O||(O=t.t[i+2]=Date.now()+P),Date.now()>O&&(k=1)),"w"==I||"r"==I){var G=0>P?t.sl:t.sr;!G[0].a||P>0&&O<=t.p[0]||0>P&&O>=t.p[0]?(t.v[0]=0,k=1):t.v[0]=P}"j"==I&&(k=1,t.p[1]++,t.v=[P,O],r(o(Y),.3*Math.random()+.7*a(t.p)))}k||(i-=3),i>0&&t.t.splice(0,i)}A(t);var B=[].concat(t.v),X=t.sl[0].e;if(B[0]){var j=[0,0],Z=1,z=X[7]-X[6];z>3&&(j[0]+=.1),3>z&&(j[0]-=.1),0==v&&(Z*=1+T(0,3,X[8]),Z*=1-.2*T(0,3,X[3])),B[0]+=j[0],B[1]+=j[1],B[0]*=Z,B[1]*=Z}B[0]&&Math.random()<.04&&r(o(J),.3*Math.random()+.7*a(t.p));var q=[t.p[0]+B[0],t.p[1]+B[1]];if(0==v){var H=~~q[0]-~~t.p[0];if(H){var c=H>0?t.sr:t.sl;H=Math.abs(H),c[H]&&c[H].a&&(t.p=q)}else t.p=q}else t.p=q}}function T(t,e,r){return Math.max(0,Math.min((r-t)/(e-t),1))}function D(t,e,r){t[e]=~~(256*r/9),t[e+3]=1}function N(t){function e(t,e,r){return e>=0&&s>e&&r>=0&&d>r?t[e+r*s]:r>50?1:0}function r(t,e,r,a){e>=0&&s>e&&r>=0&&d>r&&(t[e+r*s]=a)}function a(t,r,o){if(o--&&!(N<=p.length)){var f=~~(t+(r-t)/2),i=0;for(n=~~(Se-.5*Math.random()*(Se-xe));n>xe;n--){var c=e(Ae,f,n);if(i>6&&c){p.push([ge+f,n+1]);break}i=c?0:i+1}Math.random()<.5?(a(t,f,o),a(f,r,o)):(a(f,r,o),a(t,f,o))}}var o=!Dr;Dr=1;var f,n,i,c,u,v=o?0:.08*Math.random()*Math.random(),l=o?0:100*Math.random()*Math.random(),b=Math.random()<.3?24*Math.random()*Math.random():0,m=Math.random()<-.1*b+.4?16*Math.random()*Math.random():0,s=Ee[0],d=Ee[1],h=26;for(f=t;f<Ee[0];++f)for(n=0;n<Ee[1];++n)u=t&&t>=f?x(e(Ae,t-1,n))?1:0:+(Math.random()>-.25*(1-T(0,100,n/2+f+ge))+.09+v+.3*(T(0,25,n)+T(Ee[1]-50-l,Ee[1]-2-.2*l,n))),r(Ae,f,n,u);var E=new Uint8Array(Ae),R=Ae;for(c=0;h>c;++c){for(f=t;f<Ee[0];++f)for(n=0;n<Ee[1];++n){var A=e(R,f,n),g=.1*A+(.9+.1*Math.random())*!!e(R,f-1,n-1)+(.9+.1*Math.random())*!!e(R,f,n-1)+(.9+.1*Math.random())*!!e(R,f+1,n-1)+(1.4+.2*Math.random())*!!e(R,f-1,n)+(1.1+.2*Math.random())*!!e(R,f+1,n)+(1.6-.1*Math.random())*!!e(R,f-1,n+1)+(1.2-.2*Math.random())*!!e(R,f,n+1)+(1-.1*Math.random())*!!e(R,f+1,n+1),u=+(g<=6+(Math.random()-.5)*(1-c/h));u&&g>=6-Math.random()*b+4*T(110,0,n)&&(u=5),u&&g>=6-Math.random()*m+6*T(20,60,n)&&(u=4),r(E,f,n,u)}var y=E;E=R,R=y}for(E===R&&(Ae=E),i=0;i<Ae.length;++i)D(Re,4*i,Ae[i]);var N,p=[];o&&(N=8,a(50,128,8),Ne=p,p=[],t+=128),N=o?5:Math.min(-1-4*Math.random()+6*Math.random()*Math.random(),30-Ue.length),a(t+1,Ee[0]-1,6);for(var i=0;i<p.length;++i){var M=new S(p[i]);M.d=-1,Ue.push(M)}Xe.texImage2D(Xe.TEXTURE_2D,0,Xe.RGBA,Ee[0],Ee[1],0,Xe.RGBA,Xe.UNSIGNED_BYTE,Re)}function p(t,e){for(var r=ge+t,a=[e-t,Ee[1]],o=new Uint8Array(a[0]*a[1]*4),f=new Uint8Array(a[0]*a[1]),n=Ee[0]-t,i=0;i<a[0]&&t+i<Ee[0];++i)for(var c=0;c<a[1];++c){var u=Ae[t+i+c*Ee[0]],v=i+c*a[0];f[v]=u}ge=r,Ee=a,Re=o,Ae=f,N(n),ne[0]-=t*ye,camStart&&(camStart[0]-=t*ye)}function M(){for(var t=[],e=0;e<Ue.length;++e)Ue[e].d||t.push(Ue[e]);var r,a;if(0==t.length)r=ge+ne[0]/ye,a=ge+(ne[0]+fe[0])/ye;else{r=t[0].p[0],a=r;for(var e=0;e<t.length;++e){var o=t[e];r=Math.min(o.p[0],r),a=Math.max(o.p[0],a)}}var f=Math.max(ge,he*~~(r/he-2)),n=Math.max(ge+Ee[0],he*~~(a/he+2)),i=Math.max(0,f-ge),c=Math.max(Ee[0],i+(n-f));return i||c-i-Ee[0]?(p(i,c),1):void 0}function C(){ee=0;for(var t=0;t<Ne.length;++t){var e=new S(Ne[t],["n",3e3+3e3*Math.random(),0]);Ue.push(e)}}function U(){r(H),localStorage.ibex=Math.max(ee,localStorage.ibex||0),setTimeout(function(){onclick=location.reload.bind(location)},2e3)}function w(){K=1,C(),Te[1]=-4;var t=Date.now();!function e(){Date.now()-t>4e3||ne[1]<0?(Te[1]=0,se=me):setTimeout(e,0)}()}function W(){var t=Date.now(),e=t-Cr>=300;!e&&35>t-Mr||(Mr=t,Xe.useProgram(Tr),Xe.uniform2fv(hr,Ee),Xe.uniform1f(br,me),Xe.uniform1f(mr,ge),Xe.uniform1f(sr,se),Xe.uniform1i(lr,K),Xe.uniform1i(Er,pe),pe&&(pe=0,Xe.uniform2iv(xr,ve),Xe.uniform1f(Rr,Ce),Xe.uniform1i(Sr,Me)),Xe.bindBuffer(Xe.ARRAY_BUFFER,je),Xe.vertexAttribPointer(Ar,2,Xe.FLOAT,Xe.FALSE,0,0),Xe.bindFramebuffer(Xe.FRAMEBUFFER,yr),Xe.drawArrays(Xe.TRIANGLES,0,6),e&&(Cr=t,Xe.readPixels(0,0,Ee[0],Ee[1],Xe.RGBA,Xe.UNSIGNED_BYTE,Re),n(Re,Ae),M()&&(Xe.readPixels(0,0,Ee[0],Ee[1],Xe.RGBA,Xe.UNSIGNED_BYTE,Re),n(Re,Ae)),de++),Xe.bindFramebuffer(Xe.FRAMEBUFFER,null),me++)}function _(){requestAnimationFrame(_),h();var t=pe;W();var e=[0,0];for(n=0;n<Ue.length;n++){var a=Ue[n];if(a.d){if(a.d<0)for(O=0;O<Ue.length;O++){var o=Ue[O];if(!o.d&&f(a.p,o.p)<16){a.d=0,te++,r(q);break}}}else e[0]+=a.p[0],e[1]+=a.p[1]}e[0]/=Ue.length,e[1]/=Ue.length,le=0,be=0;for(var n=0;n<Ue.length;){var i=Ue[n];y(i,e),i.d?i.d<0&&be++:(ee=Math.max(ee,~~i.p[0]+500*te),le++),i.d<0&&i.p[0]<ge||i.d>0&&Date.now()-i.T>3e3?Ue.splice(n,1):++n}re+=.01*(ee-re),K&&!le&&($||U(),Te[0]=1,$=1,re=ee);var c=t?.5:1;c*=T(0,120,Date.now()-Le);var v=c*Te[0],l=c*Te[1];camStart&&(camStart[0]+=v,camStart[1]+=l),u([ne[0]+v,ne[1]+l]);for(var b=[],n=0;n<Ue.length;++n){var i=Ue[n],m=i.v[0]>0?i.sl:i.sr,s=m[0].f+1==Be&&m[3].a?m[0].f-m[3].f:0,E=d(i.v[0]/9,i.v[1]/9,0),x=d((i.d||0)/9,i.d>0?(Date.now()-i.T)/9e3:0,s/9);b.push(i.p[0]-ge,i.p[1],E,x)}var S=(Date.now()-pr)/999;Xe.useProgram(ur),Xe.uniform2fv(ir,fe),Xe.uniform2fv(tr,Ee),Xe.uniform1f(Ye,S),Xe.uniform1f(Je,le),Xe.uniform1f(ze,$?te:be),Xe.uniform1f(qe,ye),Xe.uniform2fv(fr,ne),Xe.uniform1i(nr,t),Xe.uniform1i(He,K),Xe.uniform1i(Ve,$),Xe.uniform1f(Ke,re),b.length&&Xe.uniform1fv(er,b),Xe.uniform1i(rr,Ue.length),Xe.uniform1i(or,Me),Xe.bindBuffer(Xe.ARRAY_BUFFER,je),Xe.vertexAttribPointer(Ze,2,Xe.FLOAT,!1,0,0),Xe.drawArrays(Xe.TRIANGLES,0,6)}function L(t,e){var r=Xe.getShaderParameter(t,Xe.COMPILE_STATUS);if(!r){var a=Xe.getShaderInfoLog(t),o=a.split(":"),f=parseInt(o[1],10),n=parseInt(o[2],10),i="";if(!isNaN(f)){for(var c="",u=0;f>u;++u)c+=" ";i="\n"+c+"^"}throw console.log(a+"\n"+e.split("\n")[n-1]+i),Xe.deleteShader(t),new Error(t+" "+a)}}function Q(t){var e=Xe.getProgramParameter(t,Xe.LINK_STATUS);if(!e)throw Xe.deleteProgram(t),new Error(t+" "+Xe.getProgramInfoLog(t))}var F=new e;window.jsfxr=function(t){F._params.setSettings(t);var e=F.totalReset(),r=new Uint8Array(4*((e+1)/2|0)+44),a=2*F.synthWave(new Uint16Array(r.buffer,44),e),o=new Uint32Array(r.buffer,0,44);o[0]=1179011410,o[1]=a+36,o[2]=1163280727,o[3]=544501094,o[4]=16,o[5]=65537,o[6]=44100,o[7]=88200,o[8]=1048578,o[9]=1635017060,o[10]=a,a+=44;for(var f=0,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="data:audio/wav;base64,";a>f;f+=3){var c=r[f]<<16|r[f+1]<<8|r[f+2];i+=n[c>>18]+n[c>>12&63]+n[c>>6&63]+n[63&c]}return i};var k,I,P,O,G="precision highp float;uniform vec2 WS;uniform vec2 RES;uniform float ZM;uniform vec2 CM;uniform bool DR;uniform bool ST;uniform bool GO;uniform float score;uniform float time;uniform sampler2D state;uniform float AN[4*30];uniform int AL;uniform float alive;uniform float TR;uniform sampler2D tiles;uniform int DO;vec3 a=vec3(0.11,0.16,0.23);vec3 b=vec3(0.74,0.66,0.51);vec3 c=vec3(0.84,0.17,0.08);vec3 d=vec3(0.40,0.75,0.90);vec3 e=vec3(0.60,0.00,0.00);vec3 f=vec3(0.30,0.60,0.70);vec3 g=vec3(0.15,0.20,0.27);vec3 h=vec3(0.07,0.12,0.19);vec3 i=vec3(0.20,0.60,0.20);vec3 j(int k){if(k==0) return a;if(k==1) return b;if(k==2) return c;if(k==3) return d;if(k==4) return e;if(k==5) return f;if(k==6) return g;if(k==7) return h;return i;}vec3 l(float m){float n=fract(m);float o=(m-n)/256.0;float p=fract(o);float q=fract((o-p)/256.0);return vec3(q,p,n)*2.0-1.0;}float r(vec2 s){return fract(sin(dot(s.xy,vec2(12.9898,78.233)))*43758.5453);}bool t(float u,float v,float w){return v<=u&&u<=w;}bool t(vec2 u,vec2 v,vec2 w){return v.x<=u.x&&u.x<=w.x&&v.y<=u.y&&u.y<=w.y;}float x=31599.0;float y=9362.0;float z=29671.0;float A=29391.0;float B=23497.0;float C=31183.0;float D=31215.0;float E=29257.0;float F=31727.0;float G=31695.0;float H(float I,float w){I=floor(I);w=floor(w);w=floor(I/pow(2.,w));return float(mod(w,2.)==1.);}float J(float I,float K,float L,vec2 u){float M=float(all(lessThan(u,vec2(K,L)))&&all(greaterThanEqual(u,vec2(0,0))));return H(I,(2.0-u.x)+3.0*u.y)*M;}float N(float O,vec2 u){O=mod(floor(O),10.0);if(O==0.0) return J(x,3.,5.,u);if(O==1.0) return J(y,3.,5.,u);if(O==2.0) return J(z,3.,5.,u);if(O==3.0) return J(A,3.,5.,u);if(O==4.0) return J(B,3.,5.,u);if(O==5.0) return J(C,3.,5.,u);if(O==6.0) return J(D,3.,5.,u);if(O==7.0) return J(E,3.,5.,u);if(O==8.0) return J(F,3.,5.,u);if(O==9.0) return J(G,3.,5.,u);return 0.0;}float P(float I,vec2 u){float Q=0.;vec2 R=vec2(1,1);Q+=N(I/100000.,floor(u-R));R.x+=4.;Q+=N(I/10000.,floor(u-R));R.x+=4.;Q+=N(I/1000.,floor(u-R));R.x+=4.;Q+=N(I/100.,floor(u-R));R.x+=4.;Q+=N(I/10.,floor(u-R));R.x+=4.;Q+=N(I,floor(u-R));return Q;}float S(float I,vec2 u){float Q=0.;vec2 R=vec2(-8,-6);Q+=N(I/10.,floor(u-R));R.x+=4.;Q+=N(I,floor(u-R));return Q;}vec4 T(vec2 u,vec2 U,vec2 V,float W,float X,float Y,float Z){vec2 ba=W>0.0?(1.0+V-mix(vec2(0.0),V,pow(smoothstep(0.0,0.5,X),0.3)))+vec2(r(gl_FragCoord.xy+time*0.03)-0.5,r(gl_FragCoord.xy+time*0.1)-0.5)*mix(1.,8.,pow(smoothstep(1.0,6.0,X),0.6)):vec2(0.0);float bb=step(0.5,fract(time/2.0));float bc=abs(V.x)<0.1?(W<0.0?5.0+bb:0.0):1.0+floor(mod(U.x/(2.0*Z),4.0));U=(ba+u-U)/Z;if(V.x>=0.0) U.x=-U.x;float bd=clamp(Y,-2.,2.)*smoothstep(0.0,4.0,U.x);U+=vec2(3.5,bd);U/=8.0;vec4 be=vec4(0.0);if(t(U,vec2(0.0),vec2(1.0))){be+=texture2D(tiles,mix(vec2(0.0,(1.0+bc)/8.0),vec2(1.0,bc/8.0),U));}if(W<0.0){bc=7.0;vec2 bf=U*(bb+1.5)+vec2(0.8,-1.0);if(t(bf,vec2(0.0),vec2(1.0))){be+=vec4(vec3(1.0),0.7+0.3*bb)*texture2D(tiles,mix(vec2(1.0,(1.0+bc)/8.0),vec2(0.0,bc/8.0),bf));}}return W>0.0?vec4(vec3(0.3+1.2*length(be.rgb),0.2,0.1),smoothstep(3.0,1.5,X)*be.a):be;}vec2 bg(float bh,float bi,float bj){return bh*vec2(cos(bj*1.1*time+bi*0.9*gl_FragCoord.x+0.5),sin(bj*time+bi*gl_FragCoord.y+0.1));}int bk(vec2 U){vec2 bl=(floor(U)+0.5)/WS;bool bm=bl.x<0.0||bl.x>1.0||bl.y<0.0||bl.y>1.0;if(bm) return U.y<0.0?1:0;float bn=texture2D(state,bl).r;return int(floor(.5+9.*bn));}vec3 bo(int k,vec2 U){return (mix(1.0,r(U),0.05*float(k==1)+0.2*float(k==8))+float(k==8)*(step(0.97,r(U))*vec3(3.0,0.0,0.0)+step(r(U),0.02)*vec3(1.5,-0.5,0.5)))*j(k);}bool bp(vec2 u,vec2 U,float Z){u=(u-U)/Z;return 0.0<u.y&&u.y<1.0&&(0.8<u.x&&u.x<1.0||1.2<u.x&&u.x<1.4||1.2<u.x&&u.x<2.0&&0.0<u.y&&u.y<0.2||1.2<u.x&&u.x<2.0&&0.4<u.y&&u.y<0.6||1.2<u.x&&u.x<1.8&&0.8<u.y&&u.y<1.0||1.6<u.x&&u.x<1.8&&0.6<u.y&&u.y<1.0||1.8<u.x&&u.x<2.0&&0.0<u.y&&u.y<0.4||2.2<u.x&&u.x<2.4||2.2<u.x&&u.x<3.0&&0.0<u.y&&u.y<0.2||2.2<u.x&&u.x<2.8&&0.4<u.y&&u.y<0.6||2.2<u.x&&u.x<3.0&&0.8<u.y&&u.y<1.0||3.2<u.x&&u.x<3.4&&!(0.4<u.y&&u.y<0.6)||3.6<u.x&&u.x<3.8&&!(0.4<u.y&&u.y<0.6)||3.4<u.x&&u.x<3.6&&0.4<u.y&&u.y<0.6);}vec2 bq=RES/vec2(2.0,2.0);vec4 br(vec2 u,vec3 be){float bs=6.*ZM;float bt=distance(u,bq);vec3 Q=j(DO);vec3 bu=1.2*(0.1+Q);if(bt<bs-4.0){return vec4(1.2*mix(be*bu,Q,0.6-0.3*float(DR)),1.0);}else if(bt<bs){return vec4(bu-0.6*be,1.0);}return vec4(0.0);}vec4 bv(vec2 u,vec3 be){float bs=4.*ZM;float bw=8.;float Y=2.*bs+bw;vec2 bx=bq-vec2(0.0,14.0*ZM);vec2 Z=vec2(8.*bs+3.*bw,2.*bs);u=u-bx+Z/2.0;if(u.x<0.0||u.x>Z.x||u.y<0.0||u.y>Z.y) return vec4(0.0);float by=floor(u.x/Y);float W=float(int(by)==DO);bx=vec2(Y*by,0.0)+vec2(bs);float bt=distance(u,bx);vec3 Q=j(int(by));Q=1.1*(Q+mix(0.0,0.1,W))+0.4*Q;if(bt<bs*mix(0.6,1.0,W)){return vec4(Q,0.5);}return vec4(0.0);}vec4 M(vec2 bz,vec2 bA){float bB=min(bz.x,bA.x);float bC=max(bz.x,bA.x);float bD=min(bz.y,bA.y);float bE=max(bz.y,bA.y);return vec4(bB,bD,bC,bE);}bool bF(vec2 u,vec2 v,vec2 w){return v.x<=u.x&&u.x<=w.x&&v.y<=u.y&&u.y<=w.y;}float bG(vec2 u,float bH,vec2 v,vec2 w){return float(bF(u,v,w)&&!bF(u,v+bH,w-bH));}vec4 bI(vec2 u,vec2 bz,vec2 bA){vec4 bJ=M(bz,bA);bz=bJ.xy;bA=bJ.zw;if(!bF(u,bz,bA)) return vec4(0.0);vec2 bK=bA-bz;vec2 bl=(u-bz)/bK;vec2 bL=WS*bl;int k=bk(bL);vec3 bM=j(k);vec2 bN=WS*ZM;vec4 bO=M(bK*CM/bN,bK*(CM+RES)/bN);vec2 bP=bz+bO.xy;vec2 bQ=bz+bO.zw;float bR=0.0;float bS=0.0;float bT=0.0;for(int by=0;by<30;++by){if(by>=AL) break;float bt=distance(vec2(AN[4*by+0],AN[4*by+1]),bL);float bU=l(AN[4*by+3]).x*9.;if(bU<0.0) bS+=float(bt<=6.0);else if(bU==0.0) bR+=float(bt<=4.0);else bT+=float(bt<=4.0);}vec4 bV=vec4(mix(a,1.2*(0.1+bM.rgb),0.7),1.0);vec4 bW=float(bS>0.0)*vec4(0.2,1.0,0.2,1.0)+float(bT>0.0)*vec4(1.0,0.2,0.1,1.0)+float(bR>0.0)*vec4(1.0,1.0,0.3,1.0)+bG(u,2.0,bz,bA)+bG(u,1.0,bP,bQ);vec4 Q=mix(bV,bW,bW.a);return vec4(Q.rgb,Q.a*0.8);}float bX(float bt,float bY,float bZ,float ca){return 1.0/(bY+bZ*bt+ca*bt*bt);}void main(){vec2 u=gl_FragCoord.xy;vec2 ba=vec2(0.0);bool cb=false;float Y;vec2 cc;vec2 cd;vec4 be;if(!ST||GO){if(GO){Y=64.0;cc=vec2((RES.x-4.0*Y)/2.0,RES.y-Y*1.4);}else{Y=140.0;cc=(RES-vec2(4.4*Y,Y))/2.0;}cd=vec2(3.0*Y,1.6*Y);if(bp(u,cc,Y)){cb=true;}}if(cb){ba+=bg(1.0,0.1,2.0);}float ce=0.0;if(ST&&!GO){ce=br(u,vec3(0.0)).a;if(ce>0.){ba+=bg(1.6,0.08,3.0);}}vec2 bL=(u+ba+CM)/ZM;vec2 cf=floor(bL);vec3 cg=bo(bk(cf),cf);vec2 ch=fract(bL);vec3 Q=cg;vec3 ci=vec3(0.02)*vec3(r(ZM*floor(u/ZM)+time/31.0),r(ZM*floor(u/ZM)+time/80.1),r(ZM*floor(u/ZM)+time/13.2));vec3 cj=-vec3(0.03)*(ch.x-ch.y);vec4 ck=vec4(0.0);float cl=bX(distance(bq,u),0.00001,0.003,0.00001);for(int by=0;by<30;++by){if(by>=AL) break;vec2 cm=vec2(AN[4*by+0],AN[4*by+1]);vec3 cn=l(AN[4*by+2]);vec3 bf=l(AN[4*by+3]);vec2 co=cn.xy*9.;float W=bf.x*9.;float X=bf.y*9.;float bd=bf.z*9.;vec4 Q=T(bL,cm,co,W,X,bd,1.0);float bt=distance(cm,bL);cl+=smoothstep(2.0,0.0,X)*bX(distance(cm,bL),0.0,0.05,0.001);ck=mix(ck,Q,Q.a);}vec3 cp=Q+ci+cj;Q=ck.a==0.0?cp:mix(cp,ck.rgb,min(1.0,ck.a));Q=mix(a,Q,min(1.0,cl)*smoothstep(WS.x,WS.x-100.0,bL.x)*smoothstep(0.0,50.0,bL.x));if(ce>0.0){be=br(u,Q);Q=mix(Q.rgb,be.rgb,be.a);}if(!ST||GO){if(cb){Q=1.4*(0.4+0.8*Q);}else if(bp(gl_FragCoord.xy,cc+vec2(8.0,-8.0),Y)){Q=vec3(0.0);}}vec2 cq=u;if(GO){cq-=(RES-RES/vec2(6.0,36.0))/2.;}if(P(score,(cq/RES)*128.*vec2(1,RES.y/RES.x))>0.0){Q=mix(vec3(1.0,0.5,0.3),vec3(1.0,0.3,1.0),float(!ST))+0.3*(1.0-Q);}float cr=150.0;float cs=0.015*RES.x;vec2 ct=u-RES+vec2(4.0*cs,2.5);if(!GO&&ST){be=bv(u,Q);Q=mix(Q.rgb,be.rgb,be.a);be=T(u,RES-vec2(2.0,3.0)*cs,vec2(0.0),0.0,0.0,0.0,0.3*cs);Q=mix(Q,be.rgb+0.2-0.3*Q,be.a);if(S(alive,(ct/RES)*cr*vec2(1,RES.y/RES.x))>0.0){Q=0.5+0.5*(1.0-Q);}}if(ST){if(GO||TR>0.0){ct+=vec2(0.0,4.0*cs);be=T(u,RES-vec2(2.0,7.0)*cs,vec2(0.0),-1.0,0.0,0.0,0.3*cs);Q=mix(Q,be.rgb+0.2-0.3*Q,be.a);if(S(TR,(ct/RES)*cr*vec2(1,RES.y/RES.x))>0.0){Q=vec3(0.0,1.0,0.0)+0.5*(1.0-Q);}}}if(!GO&&ST){vec2 bK=vec2(RES.y/6.0)*vec2(WS.x/WS.y,1.0);vec2 cu=vec2(10.0,RES.y-10.0);be=bI(u,cu,cu+bK*vec2(1.0,-1.0));Q=mix(Q,be.rgb,be.a);}gl_FragColor=vec4(Q,1.0);}",B="attribute vec2 P;void main(){gl_Position=vec4(2.0*P-1.0,0.0,1.0);}",X="\n#define RAND (S_=vec2(rand(S_), rand(S_+9.))).x\n\n#define AnyADJ(e) (NW==e||SE==e||NE==e||SW==e||NN==e||SS==e||EE==e||WW==e)\nprecision highp float;int a=0;int b=1;int c=2;int d=3;int e=4;int f=5;int g=6;int h=7;int i=8;uniform vec2 SZ;uniform float SD;uniform float TI;uniform float TS;uniform float ST;uniform sampler2D state;uniform bool RU;uniform bool draw;uniform ivec2 DP;uniform float DR;uniform int DO;int j(int k,int l){vec2 m=(gl_FragCoord.xy+vec2(k,l))/SZ;return (m.x<0.0||m.x>=1.0||m.y<0.0||m.y>=1.0)?0:int(floor(.5+9.*texture2D(state,m).r));}bool n(float o,float p,float q){return p<=o&&o<=q;}float rand(vec2 r){return fract(sin(dot(r.xy,vec2(12.9898,78.233)))*43758.5453);}float s(vec2 t){return mix(rand(vec2(t.x)),0.5*(1.0+(cos(sin(t.y*0.01+t.x*0.05)+(1.0+0.3*sin(t.x*0.01))*t.y*0.08))),0.6);}bool u(vec2 t){if(TS==0.0) return false;float v=800.0;float w=70.0;float x=5.0;float y=TI-TS-v;float z=floor(y/w);float A=(y-z*w);return distance(vec2(2.0*(x*z-ST),x*A),t)<=x;}void main(){vec2 t=gl_FragCoord.xy;vec2 S_=t+0.001*TI;int NW=j(-1,1);int NN=j(0,1);int NE=j(1,1);int WW=j(-1,0);int CC=j(0,0);int EE=j(1,0);int SW=j(-1,-1);int SS=j(0,-1);int SE=j(1,-1);bool B=CC==b||CC==i||CC==e||CC==f;int C=a;int D=int(20.0*pow(s(t),1.3));float E=mod(TI,300.0);float F=mod(TI,25.0);if(-0.05*float(NW==d)+-0.40*float(NN==d)+-0.05*float(NE==d)+-0.50*float(WW==d)+-0.50*float(CC==d)+-0.50*float(EE==d)+0.35*float(SW==c)+0.90*float(SS==c)+0.35*float(SE==c)>=0.9-0.6*RAND||CC==c&&RAND<0.9&&AnyADJ(i)){C=c;}if(n(0.3*float(NW==d)+0.9*float(NN==d)+0.3*float(NE==d)+0.1*float(WW==d)+-0.3*float(CC==c)+0.1*float(EE==d)+-0.3*float(SS==c),0.9-0.6*RAND,1.4+0.3*RAND)||!B&&RAND<0.98&&((WW==d||NW==d)&&SW==b||(EE==d||NE==d)&&SE==b)||!B&&t.y>=SZ.y-1.0&&E<100.0&&n(t.x-(rand(vec2(SD*0.7+TI-E))*SZ.x),0.0,100.0*rand(vec2(SD+TI-E)))||!B&&(0.9*float(NW==f)+1.0*float(NN==f)+0.9*float(NE==f)+0.7*float(WW==f)+0.7*float(EE==f)>=1.0-0.3*RAND)){C=d;}if(CC==b){if(!(WW==a&&EE==a)) C=b;if(RAND<0.3&&(1.0*float(NW==d)+1.2*float(NN==d)+1.0*float(NE==d)+0.5*float(WW==d)+0.5*float(EE==d)+0.3*float(SW==d)+0.2*float(SS==d)+0.3*float(SE==d)>=3.0-2.5*RAND)||RAND<0.01&&(WW==f||NN==f||EE==f)){C=f;}if(RAND<0.006+0.02*smoothstep(0.0,10000.0,ST+t.x)&&(0.3*float(NW==c)+0.2*float(SS==c)+0.3*float(NE==c)+0.5*float(WW==c)+0.5*float(EE==c)+1.0*float(SW==c)+1.2*float(NN==c)+1.0*float(SE==c)>=3.0-2.1*RAND)||RAND<0.01+0.02*smoothstep(500.0,5000.0,ST+t.x)&&(int(WW==e)+int(SS==e)+int(EE==e)+int(SE==e)+int(SW==e)>1)){C=e;}}if(D>0){if(CC==i){C=i;if(CC==i&&RAND<0.9&&(AnyADJ(c)||AnyADJ(e))){C=c;}}else if(!B&&(AnyADJ(b)||AnyADJ(i)||AnyADJ(f))){if(RAND<0.03&&j(0,-D)!=i&&(SS==i&&RAND<0.07||SS==b&&RAND<0.02||AnyADJ(d)||AnyADJ(f))){C=i;}}}if((!B||CC==c)&&SS==e){C=c;}if(CC==e){C=e;if(NW==d||NN==d||NE==d||EE==d||WW==d){C=RAND<0.8?f:b;}if(RAND<0.005&&(int(SW==c||SW==e)+int(SS==c||SS==e)+int(SE==c||SE==e)<2)){C=b;}if(int(NW==f)+int(SE==f)+int(NE==f)+int(SW==f)+int(NN==f)+int(SS==f)+int(EE==f)+int(WW==f)>1){C=RAND<0.2?e:(RAND<0.8?f:b);}}if(B&&t.y<=2.0&&F<=1.0&&RAND<0.3&&n(t.x-rand(vec2(SD*0.01+TI-F))*SZ.x,0.0,10.0*rand(vec2(SD*0.07+TI-F)))){C=e;}if(CC==f){C=f;if(RAND<0.06&&(int(NW==d||NW==f)+int(NN==d||NN==f)+int(NE==d||NE==f)<1)||(EE==c||WW==c||SS==c||SW==c||SE==c)){C=b;}if(AnyADJ(e)){C=RAND<0.15?e:(RAND<0.6?f:b);}}if(C==a){if(RAND<0.00001) C=g;if(RAND<0.00001) C=h;}int G=C==g?g:C==h?h:0;float o=(-0.1+0.05*(RAND-0.5))*float(NW==h)+0.12*float(NE==g)+-0.65*float(WW==h)+0.65*float(EE==g)+-0.1*float(SW==h)+(0.2+0.05*(RAND-0.5))*float(SE==g);if(n(o,0.4*RAND,0.95)){G=g;}else if(n(o,-0.95,-0.4*RAND)){G=h;}if(G!=0){if(C==a){C=G;}else if(C==c){if(RAND<0.4) C=G;}else if(C==d){if(RAND<0.1) C=G;}}if(draw){vec2 H=floor(t);if(distance(H,vec2(DP))<=DR){if(DO==d){if(B&&CC!=i){C=f;}else if(!B&&mod(H.x+H.y,2.0)==0.0){C=d;}}else if(DO==c){C=B?e:c;}else{C=DO;}}}if(u(t)){C=B?e:c;}if(!RU){if(C==c||C==d||C==i) C=a;if(C==e||C==f) C=b;}gl_FragColor=vec4(float(C)/9.0,0.0,0.0,1.0);}",j="attribute vec2 P;void main(){gl_Position=vec4(2.0*P-1.0,0.0,1.0);}",Z=[[3,,.45,.73,.5,.08,,.04,-.04,.15,.05,,,,,,.3799,.02,.08,,.35,.65,.08,.6],[3,.04,.34,.76,.62,.26,,-.04,-.14,.62,.35,,,.33,.28,,-.06,.3799,.13,-.0999,,.28,-.14,.2],[3,.35,.67,,.52,.12,,,,,,,,,,,.6799,,.25,-.04,,,-.0999,.2]].map(jsfxr),Y=[],J=[],z=[];for(P=0;4>P;++P)z.push(jsfxr([1,.61,.36,.14,.75,.68,,-.16,-.02,.73,.12,-.0999,.32,Math.random()/2,.32,.22,.1999,-.02,.4,-.06,.18,.78,,.3])),Y.push(jsfxr([0,.03,.3,.13,.2,.26+P/20,,.1399,,.02,.07,-.06,,.42,,,-.06,-.02,.34,.04,,.28,.06,.2])),J.push(jsfxr([3,.15+.1*Math.random(),.1749,,.22,.05+P/9,,-.16,,,,,,,,,,,.08,-.06,,.8,,.6]));var q=jsfxr([1,.16,.18,,.45,.23,,,.1,.37,.2,.58,.44,,,,,,.3,,.21,.15,.34,.3]),H=jsfxr([0,.11,1,.22,.7,.61,,-.06,-.0799,.21,.28,-.04,.2,.56,-.4,,.28,-.54,.1,-.04,.52,.8,-.02,.8]),V=document.createElement("canvas"),K=0,$=0,te=0,ee=+(localStorage.ibex||0),re=ee,ae=new Image;ae.src="t.png";var oe,fe,ne,ie,ce,ue,ve,le,be,me=0,se=0,de=0,he=128,Ee=[256,256],xe=10,Se=150,Re=new Uint8Array(Ee[0]*Ee[1]*4),Ae=new Uint8Array(Ee[0]*Ee[1]),ge=0,ye=4,Te=[0,0],De=[0,0],Ne=[],pe=0,Me=0,Ce=6,Ue=[];l(),V.addEventListener("mouseleave",l),V.addEventListener("mousedown",function(t){t.preventDefault(),K&&!$&&(ie=v(t),ce=!m(ie),ue=b(ie),camStart=[].concat(ne))}),V.addEventListener("mouseup",function(t){if(K||w(),K&&!$){if(-1!=ue){var e=b(v(t));ue==e&&(Me=ue)}l()}}),V.addEventListener("mousemove",function(t){if(K&&!$){var e=b(De=v(t));if(V.style.cursor=ie?ce?"move":"none":m(De)||-1!=e?"pointer":"default",ie){var r=De[0]-ie[0],a=De[1]-ie[1];u(ce?[camStart[0]-r,camStart[1]-a]:[camStart[0]+r,camStart[1]+a])}}});var we=0;onwheel=onmousewheel=function(t){var e=~~((we+=t.deltaY)/100);Me=(16+Me+e)%4,we-=100*e};var We,_e=new Uint8Array(200),Le=Date.now();document.addEventListener("keyup",function(t){var e=t.which;_e[e]=0,(e>=37&&40>=e||87==e||90==e||88==e||67==e||86==e)&&E()}),document.addEventListener("keydown",function(t){var e=t.which;_e[e]=1,(e>=37&&40>=e||87==e||90==e||88==e||67==e||86==e)&&(t.preventDefault(),E())});var Qe,Fe,ke,Ie,Pe=32,Oe=18,Ge=Pe/2,Be=Oe/2,Xe=V.getContext("webgl")||V.getContext("experimental-webgl");Ie=Xe.createProgram(),Fe=B,ke=Xe.VERTEX_SHADER,Qe=Xe.createShader(ke),Xe.shaderSource(Qe,Fe),Xe.compileShader(Qe),L(Qe,Fe),Xe.attachShader(Ie,Qe),Fe=G,ke=Xe.FRAGMENT_SHADER,Qe=Xe.createShader(ke),Xe.shaderSource(Qe,Fe),Xe.compileShader(Qe),L(Qe,Fe),Xe.attachShader(Ie,Qe),Xe.linkProgram(Ie),Q(Ie),Xe.useProgram(Ie);var je=Xe.createBuffer(),Ze=Xe.getAttribLocation(Ie,"P");Xe.enableVertexAttribArray(Ze),Xe.bindBuffer(Xe.ARRAY_BUFFER,je),Xe.vertexAttribPointer(Ze,2,Xe.FLOAT,!1,0,0),(onresize=function(){var t=[innerWidth,innerHeight];oe=t;var e=Math.min(t[0],512),r=~~(e*t[0]/t[1]);K||(ne=[0,256*ye-e]),fe=[r,e],V.style.width=t[0]+"px",V.style.height=t[1]+"px",V.width=fe[0],V.height=fe[1],Xe.viewport(0,0,V.width,V.height);var a=0,o=0,f=fe[0],n=fe[1];Xe.bufferData(Xe.ARRAY_BUFFER,new Float32Array([a,o,f,o,a,n,a,n,f,o,f,n]),Xe.STATIC_DRAW),Xe.uniform2fv(ir,fe)})();var Ye=Xe.getUniformLocation(Ie,"time"),Je=Xe.getUniformLocation(Ie,"alive"),ze=Xe.getUniformLocation(Ie,"TR"),qe=Xe.getUniformLocation(Ie,"ZM"),He=Xe.getUniformLocation(Ie,"ST"),Ve=Xe.getUniformLocation(Ie,"GO"),Ke=Xe.getUniformLocation(Ie,"score"),$e=Xe.getUniformLocation(Ie,"state"),tr=Xe.getUniformLocation(Ie,"WS"),er=Xe.getUniformLocation(Ie,"AN"),rr=Xe.getUniformLocation(Ie,"AL"),ar=Xe.getUniformLocation(Ie,"tiles"),or=Xe.getUniformLocation(Ie,"DO"),fr=Xe.getUniformLocation(Ie,"CM"),nr=Xe.getUniformLocation(Ie,"DR"),ir=Xe.getUniformLocation(Ie,"RES"),cr=Xe.createTexture();ae.onload=function(){Xe.useProgram(ur),Xe.activeTexture(Xe.TEXTURE1),Xe.bindTexture(Xe.TEXTURE_2D,cr),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_WRAP_S,Xe.CLAMP_TO_EDGE),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_WRAP_T,Xe.CLAMP_TO_EDGE),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_MIN_FILTER,Xe.NEAREST),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_MAG_FILTER,Xe.NEAREST),Xe.texImage2D(Xe.TEXTURE_2D,0,Xe.RGBA,Xe.RGBA,Xe.UNSIGNED_BYTE,ae),Xe.uniform1i(ar,1),Xe.activeTexture(Xe.TEXTURE0)},Xe.uniform1i($e,0);var ur=Ie;Ie=Xe.createProgram(),Fe=j,ke=Xe.VERTEX_SHADER,Qe=Xe.createShader(ke),Xe.shaderSource(Qe,Fe),Xe.compileShader(Qe),L(Qe,Fe),Xe.attachShader(Ie,Qe),Fe=X,ke=Xe.FRAGMENT_SHADER,Qe=Xe.createShader(ke),Xe.shaderSource(Qe,Fe),Xe.compileShader(Qe),L(Qe,Fe),Xe.attachShader(Ie,Qe),Xe.linkProgram(Ie),Q(Ie);var vr=Xe.getUniformLocation(Ie,"SD"),lr=Xe.getUniformLocation(Ie,"RU"),br=Xe.getUniformLocation(Ie,"TI"),mr=Xe.getUniformLocation(Ie,"ST"),sr=Xe.getUniformLocation(Ie,"TS"),dr=Xe.getUniformLocation(Ie,"state"),hr=Xe.getUniformLocation(Ie,"SZ"),Er=Xe.getUniformLocation(Ie,"draw"),xr=Xe.getUniformLocation(Ie,"DP"),Sr=Xe.getUniformLocation(Ie,"DO"),Rr=Xe.getUniformLocation(Ie,"DR"),Ar=Xe.getAttribLocation(Ie,"P");Xe.enableVertexAttribArray(Ar);var gr=Xe.createTexture();Xe.activeTexture(Xe.TEXTURE0),Xe.bindTexture(Xe.TEXTURE_2D,gr),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_MIN_FILTER,Xe.LINEAR),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_WRAP_S,Xe.CLAMP_TO_EDGE),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_WRAP_T,Xe.CLAMP_TO_EDGE);var yr=Xe.createFramebuffer();Xe.bindFramebuffer(Xe.FRAMEBUFFER,yr),Xe.framebufferTexture2D(Xe.FRAMEBUFFER,Xe.COLOR_ATTACHMENT0,Xe.TEXTURE_2D,gr,0),Xe.useProgram(Ie),Xe.uniform1f(vr,Math.random()),Xe.uniform1i(dr,0);var Tr=Ie,Dr=0;N(0);var Nr=new Uint8Array(100);for(k=0;100>k;++k)for(var I=Ee[1]-1;I>0;I--)if(x(Ae[k+I*Ee[0]])){Nr[k]=I;break}var pr=Date.now(),Mr=0,Cr=0;document.body.innerHTML="",document.body.appendChild(V),_()},300);