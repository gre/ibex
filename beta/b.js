setTimeout(function(){function t(){this.setSettings=function(t){for(var e=0;24>e;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var r=this.b+this.c+this.e;if(.18>r){var a=.18/r;this.b*=a,this.c*=a,this.e*=a}}}function e(){this._params=new t;var e,r,a,o,i,n,f,c,l,d,v,s;this.reset=function(){var t=this._params;o=100/(t.f*t.f+.001),i=100/(t.g*t.g+.001),n=1-t.h*t.h*t.h*.01,f=-t.i*t.i*t.i*1e-6,t.a||(v=.5-t.n/2,s=5e-5*-t.o),c=1+t.l*t.l*(t.l>0?-.9:10),l=0,d=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.reset();var t=this._params;return e=t.b*t.b*1e5,r=t.c*t.c*1e5,a=t.e*t.e*1e5+12,3*((e+r+a)/3|0)},this.synthWave=function(t,m){var b=this._params,u=1!=b.s||b.v,h=b.v*b.v*.1,x=1+3e-4*b.w,g=b.s*b.s*b.s*.1,E=1+1e-4*b.t,A=1!=b.s,S=b.x*b.x,N=b.g,w=b.q||b.r,D=b.r*b.r*b.r*.2,R=b.q*b.q*(b.q<0?-1020:1020),y=b.p?((1-b.p)*(1-b.p)*2e4|0)+32:0,p=b.d,C=b.j/2,T=b.k*b.k*.01,U=b.a,z=e,M=1/e,W=1/r,_=1/a,L=5/(1+b.u*b.u*20)*(.01+g);L>.8&&(L=.8),L=1-L;for(var F,k,j,P,B,X,G=!1,I=0,H=0,O=0,J=0,q=0,Y=0,V=0,K=0,Z=0,Q=0,$=new Array(1024),te=new Array(32),ee=$.length;ee--;)$[ee]=0;for(var ee=te.length;ee--;)te[ee]=2*Math.random()-1;for(var ee=0;m>ee;ee++){if(G)return ee;if(y&&++Z>=y&&(Z=0,this.reset()),d&&++l>=d&&(d=0,o*=c),n+=f,o*=n,o>i&&(o=i,N>0&&(G=!0)),k=o,C>0&&(Q+=T,k*=1+Math.sin(Q)*C),k|=0,8>k&&(k=8),U||(v+=s,0>v?v=0:v>.5&&(v=.5)),++H>z)switch(H=0,++I){case 1:z=r;break;case 2:z=a}switch(I){case 0:O=H*M;break;case 1:O=1+2*(1-H*W)*p;break;case 2:O=1-H*_;break;case 3:O=0,G=!0}w&&(R+=D,j=0|R,0>j?j=-j:j>1023&&(j=1023)),u&&x&&(h*=x,1e-5>h?h=1e-5:h>.1&&(h=.1)),X=0;for(var re=8;re--;){if(V++,V>=k&&(V%=k,3==U))for(var ae=te.length;ae--;)te[ae]=2*Math.random()-1;switch(U){case 0:B=v>V/k?.5:-.5;break;case 1:B=1-V/k*2;break;case 2:P=V/k,P=6.28318531*(P>.5?P-1:P),B=1.27323954*P+.405284735*P*P*(0>P?1:-1),B=.225*((0>B?-1:1)*B*B-B)+B;break;case 3:B=te[Math.abs(32*V/k|0)]}u&&(F=Y,g*=E,0>g?g=0:g>.1&&(g=.1),A?(q+=(B-Y)*g,q*=L):(Y=B,q=0),Y+=q,J+=Y-F,J*=1-h,B=J),w&&($[K%1024]=B,B+=$[(K-j+1024)%1024],K++),X+=B}X*=.125*O*S,t[ee]=X>=1?32767:-1>=X?-32768:32767*X|0}return m}}function r(t,e){var r=new Audio;r.src=t,r.volume=e||1,r.play()}function a(t){return Math.pow(A(100,10,U(t,i(v()))),2)}function o(t,e,r){return Math.max(t,Math.min(r,e))}function i(t){return[(De[0]+t[0])/we,(De[1]+t[1])/we]}function n(t){De=[o(-ie[0]/2,ie[0]/2+we*xe[0]-ie[0],t[0]),o(-.3*ie[1],.7*ie[1]+we*xe[1]-ie[1],t[1])]}function f(t){return[t.clientX*ie[0]/oe[0],ie[1]-t.clientY*ie[1]/oe[1]]}function c(){camStart=dragStart=dragCam=selectElStart=0,Q.style.cursor=$?"default":"pointer"}function l(t){var e=8*we,r=ie[1]/3-14*we-e/2;if(r-5<t[1]&&t[1]<r+e+5){var a=8*we+8,o=(ie[0]-4*a)/2,i=~~((t[0]-o)/a);if(i>=0&&4>i)return i}return-1}function d(t){return U(v(),t)<we*(K+2)}function v(){return[ie[0]/2,ie[1]/3]}function s(){var t=We[32];t&&!$&&p(),$&&!te&&(t&&(pe=1),We[87]||We[90]?Ce=0:We[88]?Ce=1:We[67]?Ce=2:We[86]&&(Ce=3),pe||!dragStart||dragCam||(pe=1),ne=i(v()))}function m(){var t=6,e=We[39]-We[37],r=We[38]-We[40],a=e+"_"+r;a!=Me&&(Me=a,_e=Date.now()),Re=[t*e,t*r]}function b(t){return 1==t||4==t||5==t}function u(t,e){var r=this;r.p=t,r.t=e||[],r.v=[0,0],r.dt=0}function h(t,e,r){var a=~~(t.p[0]-Xe)+e-Ne;if(0>a||a>=xe[0])return 1;var o=~~(t.p[1]-Ge)+r;return 0>o||o>=xe[1]?1:Se[a+o*xe[0]]}function x(t){function e(e){var r,a,o,i,n=[],f=[];for(a=Xe,o=Ge;a>=0&&Pe>a;a+=e){for(o==Be&&o--,-1==o&&o++;Be>o&&b(h(t,a,o));)o++;if(Be>o)for(;o>=0&&!b(h(t,a,o));)o--;f.push(o)}var c=0;for(i=0,a=Xe,r=1;a>=0&&Pe>a;a+=e,++i){var l,d,v,s=f[i],m=h(t,a,Ge),u=[0,0,0,0,0,0,0,0,0],x=[0,0,0,0,0,0,0,0,0],g=new Uint8Array(Be);for(o=0;Be>o;++o)g[o]=h(t,a,o);for(v=((Xe-1>i?f[i+1]:s)+(Xe-2>i?f[i+2]:s))/2-s,l=s+1;Be>l&&!b(g[l]);l++);for(d=l-s-1,(4>d||-4>v||v>4)&&(r=0),o=s;l>=o;++o)u[g[o]]++;for(o=0;Be>o;++o)x[g[o]]++;n.push({f:s,c:l,h:d,s:v,e:u,v:x,a:r,l:m}),r&&c++}return n.a=c,n}var r=ue+"_"+~~t.p[0]+"_"+~~t.p[1];t.h!=r&&(t.h=r,t.sl=e(-1),t.sr=e(1))}function g(t,e){t.d=1+e,t.T=Date.now(),r(I[e],a(t.p))}function E(t,e){if(!(t.d>0)){x(t);var o,i,n,f=t.sl[0],c=f.f,l=Ge-(c+1);if(f.e[2])for(i=0;5>=i;++i)if(2==h(t,Xe,Ge+i)){g(t,2);break}if(!l&&t.v[1]<-3)return g(t,0);if(l){if(c>Ge&&-5>l){var d=0,v=0;for(n=0;5>n;++n)d==n&&b(t.sl[n].l)&&d++,v==n&&b(t.sr[n].l)&&v++;if(5!=d)t.p[0]-=d,t.v[0]>0&&(t.v[0]*=-.5);else{if(5==v)return g(t,1);t.p[0]+=d,t.v[0]<0&&(t.v[0]*=-.5)}}l>0?t.v[1]-=.12:(t.p[1]-=l,t.v=[0,0])}else t.v[1]=0,t.p[1]=~~t.p[1];if(t.p[1]<0)return g(t,0);x(t);var s=Date.now();if(!t.d&&(0==t.t.length||"n"!=t.t[0]&&s>t.dt)){s>t.dt&&(t.t=[]),t.dt=s+500+500*Math.random();var m,u=0,E=Xe;for(n=0;E>n;++n){if(t.sl[n]&&t.sl[n].e[3]){u=-1,m=n;break}if(t.sr[n]&&t.sr[n].e[3]){u=1,m=n;break}}var S,N=0,w=Xe;for(n=0;w>n;++n){if(t.sl[n]&&t.sl[n].v[2]){N=-1,S=n;break}if(t.sr[n]&&t.sr[n].v[2]){N=1,S=n;break}}var D,R,y,p=[e[0]-t.p[0],e[1]-t.p[1]],C=0;for(n=0;Xe>n;++n){var T=t.sr[n];if(!T.a){T.s<-3&&(C=1,R=[n,T.f]);break}}if(C)for(n=R[0]+2;Xe>n;++n){var T=t.sr[n],U=T.f-R[1];if(-1!=T.f&&U>=-8&&5>=U){T.h>=4&&(D=1,y=[n,T.f]);break}}o=~~t.p[0],i=~~t.p[1];var z=[];if((0>N||!N&&Math.random()<.5)&&C&&D){var M=.1+.09*(y[0]-R[0]),W=1;z=["r",.7,o+R[0]-1,"j",M,W,"n",500,0]}else if(N)z=["r",-1*N,o+(0>N?30:-30)+10*(.5-Math.random()),"w",-.5*N,o+(0>N?50:-50)+10*(.5-Math.random())];else{var T=Math.random(),_=u&&8>m,L=_&&Math.random()<.7?u:Math.random()<.1?t.sr.a-t.sl.a:Math.random()<.1&&Math.abs(p[0])>80?p[0]:1;z=.9>T||_?["w",(L>=0?1:-1)*(.4-(_?.3*A(8,0,m):0)),o+(L>=0?t.sr.a-1:-t.sl.a+1)]:["n",800,0]}t.t=t.t.concat(z)}if(0==l){var n,F=1;for(n=0;n<t.t.length&&F;n+=3){F=0;var k=t.t[n],j=t.t[n+1],P=t.t[n+2];if("n"==k&&(P||(P=t.t[n+2]=Date.now()+j),Date.now()>P&&(F=1)),"w"==k||"r"==k){var B=0>j?t.sl:t.sr;!B[0].a||j>0&&P<=t.p[0]||0>j&&P>=t.p[0]?(t.v[0]=0,F=1,r(O[~~(Math.random()*O.length)],.3*Math.random()+.7*a(t.p))):t.v[0]=j}"j"==k&&(F=1,t.p[1]++,t.v=[j,P],r(H[~~(Math.random()*H.length)],.3*Math.random()+.7*a(t.p)))}F||(n-=3),n>0&&t.t.splice(0,n)}x(t);var X=[].concat(t.v),G=t.sl[0].e;if(X[0]){var I=[0,0],J=1,q=G[7]-G[6];q>3&&(I[0]+=.1),3>q&&(I[0]-=.1),0==l&&(J*=1+.8*A(0,3,G[8]),J*=1-.2*A(0,3,G[3])),X[0]+=I[0],X[1]+=I[1],X[0]*=J,X[1]*=J}var Y=[t.p[0]+X[0],t.p[1]+X[1]];if(0==l){var V=~~Y[0]-~~t.p[0];if(V){var f=V>0?t.sr:t.sl;V=Math.abs(V),f[V]&&f[V].a&&(t.p=Y)}else t.p=Y}else t.p=Y}}function A(t,e,r){return Math.max(0,Math.min((r-t)/(e-t),1))}function S(t,e,r){t[e]=~~(256*r/9),t[e+3]=1}function N(t){function e(t,e,r){return e>=0&&m>e&&r>=0&&h>r?t[e+r*m]:r>50?1:0}function r(t,e,r,a){e>=0&&m>e&&r>=0&&h>r&&(t[e+r*m]=a)}function a(t,r,o){if(o&&!(R<=y.length)){var n=~~(t+(r-t)/2),f=0;for(i=~~(Ee-Math.random()*(Ee-ge));i>ge;i--){var c=e(Se,n,i);if(f>6&&c){y.push([Ne+n,i+1]);break}f=c?0:f+1}Math.random()<.5?(a(t,n,o-1),a(n,r,o-1)):(a(n,r,o-1),a(t,n,o-1))}}var o,i,n,f,c,l=Ne?.08*Math.random()*Math.random():0,d=Ne?100*Math.random()*Math.random():0,v=Math.random()<.3?24*Math.random()*Math.random():0,s=Math.random()<-.1*v+.4?16*Math.random()*Math.random():0,m=xe[0],h=xe[1],x=26;for(o=t;o<xe[0];++o)for(i=0;i<xe[1];++i)c=t&&t>=o?b(e(Se,t-1,i))?1:0:+(Math.random()>-.25*A(140,0,o+Ne)*A(xe[1]-5,xe[1]-50,i)+.09+l+.3*(A(0,25,i)+A(xe[1]-50-d,xe[1]-2-.2*d,i))),r(Se,o,i,c);var g=new Uint8Array(Se),E=Se;for(f=0;x>f;++f){for(o=t;o<xe[0];++o)for(i=0;i<xe[1];++i){var N=e(E,o,i),w=.1*N+(.9+.1*Math.random())*!!e(E,o-1,i-1)+(.9+.1*Math.random())*!!e(E,o,i-1)+(.9+.1*Math.random())*!!e(E,o+1,i-1)+(1.4+.2*Math.random())*!!e(E,o-1,i)+(1.1+.2*Math.random())*!!e(E,o+1,i)+(1.6-.1*Math.random())*!!e(E,o-1,i+1)+(1.2-.2*Math.random())*!!e(E,o,i+1)+(1-.1*Math.random())*!!e(E,o+1,i+1),c=+(w<=6+(Math.random()-.5)*(1-f/x));c&&w>=6-Math.random()*v+4*A(110,0,i)&&(c=5),c&&w>=6-Math.random()*s+6*A(20,60,i)&&(c=4),r(g,o,i,c)}var D=g;g=E,E=D}g===E&&(Se=g);var R=Math.min(-1-2*Math.random()+6*Math.random()*Math.random(),V-Ue.length),y=[];if(t){a(t+1,xe[0]-1,8);for(var n=0;n<y.length;++n){var p=new u(y[n]);p.d=-1,Ue.push(p)}}for(n=0;n<Se.length;++n)S(Ae,4*n,Se[n]);Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,xe[0],xe[1],0,Ie.RGBA,Ie.UNSIGNED_BYTE,Ae)}function w(t,e){for(var r=Ne+t,a=[e-t,xe[1]],o=new Uint8Array(a[0]*a[1]*4),i=new Uint8Array(a[0]*a[1]),n=xe[0]-t,f=0;f<a[0]&&t+f<xe[0];++f)for(var c=0;c<a[1];++c){var l=Se[t+f+c*xe[0]],d=f+c*a[0];i[d]=l}Ne=r,xe=a,Ae=o,Se=i,N(n),De[0]-=t*we,camStart&&(camStart[0]-=t*we)}function D(){for(var t=[],e=0;e<Ue.length;++e)Ue[e].d||t.push(Ue[e]);var r,a;if(0==t.length)r=Ne+De[0]/we,a=Ne+(De[0]+ie[0])/we;else{r=t[0].p[0],a=r;for(var e=0;e<t.length;++e){var o=t[e];r=Math.min(o.p[0],r),a=Math.max(o.p[0],a)}}var i=Math.max(Ne,he*~~(r/he-2)),n=Math.max(Ne+xe[0],he*Math.ceil(a/he+2)),f=Math.max(0,i-Ne),c=Math.max(xe[0],f+(n-i));return f||c-f-xe[0]?(w(f,c),1):void 0}function R(){for(r(Y),ee=0,k=0;ve>k;++k){var t=~~(40+40*Math.random()),e=Cr[t]+1,a=new u([t,e],["n",3e3+3e3*Math.random(),0]);Ue.push(a)}}function y(){r(q),localStorage.ibex=Math.max(ee,localStorage.ibex||0),setTimeout(function(){onclick=location.reload},2e3)}function p(){$=1,R(),Re[1]=3;var t=Date.now();!function e(){Date.now()-t>5e3||De[1]+ie[1]>=xe[1]*we?(Re[1]=0,be=me):setTimeout(e,0)}()}function C(){var t=Date.now(),e=t-zr>=de;!e&&le>t-Ur||(Ur=t,Ie.useProgram(pr),Ie.uniform2fv(Er,xe),Ie.uniform1f(ur,me),Ie.uniform1f(hr,Ne),Ie.uniform1f(xr,be),Ie.uniform1i(br,$),Ie.uniform1i(Ar,pe),pe&&(pe=0,Ie.uniform2iv(Sr,ne),Ie.uniform1f(wr,Te),Ie.uniform1i(Nr,Ce)),Ie.bindBuffer(Ie.ARRAY_BUFFER,He),Ie.vertexAttribPointer(Dr,2,Ie.FLOAT,Ie.FALSE,0,0),Ie.bindFramebuffer(Ie.FRAMEBUFFER,yr),Ie.drawArrays(Ie.TRIANGLES,0,6),e&&(zr=t,Ie.readPixels(0,0,xe[0],xe[1],Ie.RGBA,Ie.UNSIGNED_BYTE,Ae),z(Ae,Se),D()&&(Ie.readPixels(0,0,xe[0],xe[1],Ie.RGBA,Ie.UNSIGNED_BYTE,Ae),z(Ae,Se)),ue++),Ie.bindFramebuffer(Ie.FRAMEBUFFER,null),me++)}function T(){requestAnimationFrame(T),s();var t=pe;C();var e=[0,0];for(i=0;i<Ue.length;i++){var a=Ue[i];if(a.d){if(a.d<0)for(j=0;j<Ue.length;j++){var o=Ue[j];if(!o.d&&U(a.p,o.p)<10){a.d=0,r(J);break}}}else e[0]+=a.p[0],e[1]+=a.p[1]}e[0]/=Ue.length,e[1]/=Ue.length,fe=0,ce=0;for(var i=0;i<Ue.length;){var f=Ue[i];E(f,e),f.d?f.d<0&&ce++:(ee=Math.max(ee,~~f.p[0]),fe++),f.d<0&&f.p[0]<Ne||f.d>0&&Date.now()-f.T>3e3?Ue.splice(i,1):++i}re+=.01*(ee-re),$&&!fe&&(te||y(),Re[0]=1,te=1,re=ee);var c=t?.5:"0_0"!=Me&&Date.now()-_e>500?2:1,l=c*Re[0],d=c*Re[1];camStart&&(camStart[0]+=l,camStart[1]+=d),n([De[0]+l,De[1]+d]);for(var v=[],i=0;i<Ue.length;++i){var f=Ue[i],m=f.v[0]>0?f.sl:f.sr,b=m[0].f+1==Ge&&m[3].a?m[0].f-m[3].f:0;v.push(f.p[0]-Ne,f.p[1],f.v[0],f.v[1],f.d,(f.T-Tr)/1e3,b)}var u=(Date.now()-Tr)/1e3;Ie.useProgram(sr),Ie.uniform2fv(dr,ie),Ie.uniform2fv(tr,xe),Ie.uniform1f(Je,u),Ie.uniform1f(qe,fe),Ie.uniform1f(Ye,ce),Ie.uniform1f(Ve,we),Ie.uniform2fv(fr,De),Ie.uniform2fv(cr,ye),Ie.uniform1i(lr,t),Ie.uniform1i(Ke,$),Ie.uniform1i(Ze,te),Ie.uniform1f(Qe,re),v.length&&Ie.uniform1fv(er,v),Ie.uniform1i(rr,Ue.length),Ie.uniform1f(nr,Te),Ie.uniform1i(ir,Ce),Ie.bindBuffer(Ie.ARRAY_BUFFER,He),Ie.vertexAttribPointer(Oe,2,Ie.FLOAT,!1,0,0),Ie.drawArrays(Ie.TRIANGLES,0,6)}function U(t,e){var r=t[0]-e[0],a=t[1]-e[1];return Math.sqrt(r*r+a*a)}function z(t,e){for(var r=0;r<t.length;r+=4)e[r/4]=~~(.5+9*t[r]/256)}function M(t,e){var r=Ie.getShaderParameter(t,Ie.COMPILE_STATUS);if(!r){var a=Ie.getShaderInfoLog(t),o=a.split(":"),i=parseInt(o[1],10),n=parseInt(o[2],10),f="";if(!isNaN(i)){for(var c="",l=0;i>l;++l)c+=" ";f="\n"+c+"^"}throw console.log(a+"\n"+e.split("\n")[n-1]+f),Ie.deleteShader(t),new Error(t+" "+a)}}function W(t){var e=Ie.getProgramParameter(t,Ie.LINK_STATUS);if(!e)throw Ie.deleteProgram(t),new Error(t+" "+Ie.getProgramInfoLog(t))}var _=new e;window.jsfxr=function(t){_._params.setSettings(t);var e=_.totalReset(),r=new Uint8Array(4*((e+1)/2|0)+44),a=2*_.synthWave(new Uint16Array(r.buffer,44),e),o=new Uint32Array(r.buffer,0,44);o[0]=1179011410,o[1]=a+36,o[2]=1163280727,o[3]=544501094,o[4]=16,o[5]=65537,o[6]=44100,o[7]=88200,o[8]=1048578,o[9]=1635017060,o[10]=a,a+=44;for(var i=0,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="data:audio/wav;base64,";a>i;i+=3){var c=r[i]<<16|r[i+1]<<8|r[i+2];f+=n[c>>18]+n[c>>12&63]+n[c>>6&63]+n[63&c]}return f};var L,F,k,j,P="precision highp float;uniform vec3 colors[9];uniform vec2 worldSize;uniform vec2 resolution;uniform float zoom;uniform vec2 camera;uniform vec2 mouse;uniform bool drawing;uniform bool started;uniform bool gameover;uniform float score;uniform float time;uniform sampler2D state;uniform float animals[7*30];uniform int animalsLength;uniform float alive;uniform float toRescue;uniform sampler2D tiles;uniform float drawRadius;uniform int drawObject;float a(vec2 b){return fract(sin(dot(b.xy,vec2(12.9898,78.233)))*43758.5453);}bool c(float d,float e,float f){return e<=d&&d<=f;}bool c(vec2 d,vec2 e,vec2 f){return e.x<=d.x&&d.x<=f.x&&e.y<=d.y&&d.y<=f.y;}float g=31599.0;float h=9362.0;float i=29671.0;float j=29391.0;float k=23497.0;float l=31183.0;float m=31215.0;float n=29257.0;float o=31727.0;float p=31695.0;float q(float r,float f){r=floor(r);f=floor(f);f=floor(r/pow(2.,f));return float(mod(f,2.)==1.);}float s(float r,float t,float u,vec2 d){float v=float(all(lessThan(d,vec2(t,u)))&&all(greaterThanEqual(d,vec2(0,0))));return q(r,(2.0-d.x)+3.0*d.y)*v;}float w(float x,vec2 d){x=mod(floor(x),10.0);if(x==0.0) return s(g,3.,5.,d);if(x==1.0) return s(h,3.,5.,d);if(x==2.0) return s(i,3.,5.,d);if(x==3.0) return s(j,3.,5.,d);if(x==4.0) return s(k,3.,5.,d);if(x==5.0) return s(l,3.,5.,d);if(x==6.0) return s(m,3.,5.,d);if(x==7.0) return s(n,3.,5.,d);if(x==8.0) return s(o,3.,5.,d);if(x==9.0) return s(p,3.,5.,d);return 0.0;}float y(float r,vec2 d){float z=0.;vec2 A=vec2(1,1);z+=w(r/100000.,floor(d-A));A.x+=4.;z+=w(r/10000.,floor(d-A));A.x+=4.;z+=w(r/1000.,floor(d-A));A.x+=4.;z+=w(r/100.,floor(d-A));A.x+=4.;z+=w(r/10.,floor(d-A));A.x+=4.;z+=w(r,floor(d-A));return z;}float B(float r,vec2 d){float z=0.;vec2 A=vec2(-8,-6);z+=w(r/10.,floor(d-A));A.x+=4.;z+=w(r,floor(d-A));return z;}vec4 C(vec2 d,vec2 D,vec2 E,float F,float G,float H,float I){vec2 J=F>0.0?(1.0+E-mix(vec2(0.0),E,pow(smoothstep(0.0,0.5,time-G),0.3)))+vec2(a(gl_FragCoord.xy+time*0.03)-0.5,a(gl_FragCoord.xy+time*0.1)-0.5)*mix(1.,8.,pow(smoothstep(1.0,6.0,time-G),0.6)):vec2(0.0);float K=step(0.5,fract(time/2.0));float L=abs(E.x)<0.1?(F<0.0?5.0+K:0.0):1.0+floor(mod(D.x/(2.0*I),4.0));D=(J+d-D)/I;if(E.x>=0.0) D.x=-D.x;float M=clamp(H,-2.,2.)*smoothstep(0.0,4.0,D.x);D+=vec2(3.5,M);D/=8.0;vec4 N=vec4(0.0);if(c(D,vec2(0.0),vec2(1.0))){N+=texture2D(tiles,mix(vec2(0.0,(1.0+L)/8.0),vec2(1.0,L/8.0),D));}if(F<0.0){L=7.0;vec2 O=D*(K+1.5)+vec2(0.8,-1.0);if(c(O,vec2(0.0),vec2(1.0))){N+=vec4(vec3(1.0),0.7+0.3*K)*texture2D(tiles,mix(vec2(1.0,(1.0+L)/8.0),vec2(0.0,L/8.0),O));}}return F>0.0?vec4(vec3(0.3+1.2*length(N.rgb),0.2,0.1),smoothstep(3.0,1.5,time-G)*N.a):N;}vec2 P(float Q,float R,float S){return Q*vec2(cos(S*1.1*time+R*0.9*gl_FragCoord.x+0.5),sin(S*time+R*gl_FragCoord.y+0.1));}vec3 T(int U){if(U==0) return colors[0];if(U==1) return colors[1];if(U==2) return colors[2];if(U==3) return colors[3];if(U==4) return colors[4];if(U==5) return colors[5];if(U==6) return colors[6];if(U==7) return colors[7];return colors[8];}int V(vec2 D){vec2 W=(floor(D)+0.5)/worldSize;bool X=W.x<0.0||W.x>1.0||W.y<0.0||W.y>1.0;if(X) return D.y<0.0?1:0;float Y=texture2D(state,W).r;return int(floor(.5+9.*Y));}vec3 Z(int U,vec2 D){return (mix(1.0,a(D),0.05*float(U==1)+0.2*float(U==8))+float(U==8)*(step(0.97,a(D))*vec3(3.0,0.0,0.0)+step(a(D),0.02)*vec3(1.5,-0.5,0.5)))*T(U);}bool ba(vec2 d,vec2 D,float I){d=(d-D)/I;return 0.0<d.y&&d.y<1.0&&(0.8<d.x&&d.x<1.0||1.2<d.x&&d.x<1.4||1.2<d.x&&d.x<2.0&&0.0<d.y&&d.y<0.2||1.2<d.x&&d.x<2.0&&0.4<d.y&&d.y<0.6||1.2<d.x&&d.x<1.8&&0.8<d.y&&d.y<1.0||1.6<d.x&&d.x<1.8&&0.6<d.y&&d.y<1.0||1.8<d.x&&d.x<2.0&&0.0<d.y&&d.y<0.4||2.2<d.x&&d.x<2.4||2.2<d.x&&d.x<3.0&&0.0<d.y&&d.y<0.2||2.2<d.x&&d.x<2.8&&0.4<d.y&&d.y<0.6||2.2<d.x&&d.x<3.0&&0.8<d.y&&d.y<1.0||3.2<d.x&&d.x<3.4&&!(0.4<d.y&&d.y<0.6)||3.6<d.x&&d.x<3.8&&!(0.4<d.y&&d.y<0.6)||3.4<d.x&&d.x<3.6&&0.4<d.y&&d.y<0.6);}vec2 bb=resolution/vec2(2.0,3.0);vec4 bc(vec2 d,vec3 N){float bd=6.*zoom;float be=distance(d,bb);vec3 z=T(drawObject);vec3 bf=1.2*(0.1+z);if(be<bd-4.0){return vec4(1.2*mix(N*bf,z,0.6-0.3*float(drawing)),1.0);}else if(be<bd){return vec4(bf-0.6*N,1.0);}return vec4(0.0);}vec4 bg(vec2 d,vec3 N){float bd=4.*zoom;float bh=8.;float H=2.*bd+bh;vec2 bi=bb-vec2(0.0,14.0*zoom);vec2 I=vec2(8.*bd+3.*bh,2.*bd);d=d-bi+I/2.0;if(d.x<0.0||d.x>I.x||d.y<0.0||d.y>I.y) return vec4(0.0);float bj=floor(d.x/H);float F=float(int(bj)==drawObject);bi=vec2(H*bj,0.0)+vec2(bd);float be=distance(d,bi);vec3 z=T(int(bj));z=1.1*(z+mix(0.0,0.1,F))+0.4*z;if(be<bd*mix(0.6,1.0,F)){return vec4(z,0.5);}return vec4(0.0);}vec4 v(vec2 bk,vec2 bl){float bm=min(bk.x,bl.x);float bn=max(bk.x,bl.x);float bo=min(bk.y,bl.y);float bp=max(bk.y,bl.y);return vec4(bm,bo,bn,bp);}bool bq(vec2 d,vec2 e,vec2 f){return e.x<=d.x&&d.x<=f.x&&e.y<=d.y&&d.y<=f.y;}float br(vec2 d,float bs,vec2 e,vec2 f){return float(bq(d,e,f)&&!bq(d,e+bs,f-bs));}vec4 bt(vec2 d,vec2 bk,vec2 bl){vec4 bu=v(bk,bl);bk=bu.xy;bl=bu.zw;if(!bq(d,bk,bl)) return vec4(0.0);vec2 bv=bl-bk;vec2 W=(d-bk)/bv;vec2 bw=worldSize*W;int U=V(bw);vec3 bx=T(U);vec2 by=worldSize*zoom;vec4 bz=v(bv*camera/by,bv*(camera+resolution)/by);vec2 bA=bk+bz.xy;vec2 bB=bk+bz.zw;float bC=0.0;float bD=0.0;for(int bj=0;bj<30;++bj){if(bj>=animalsLength) break;float be=distance(vec2(animals[7*bj+0],animals[7*bj+1]),bw);if(animals[7*bj+4]<0.0) bD+=float(be<=6.0);else bC+=float(be<=4.0);}vec4 bE=vec4(mix(colors[0],bx.rgb,0.7),1.0);vec4 bF=float(bC>0.0)*vec4(1.0,1.0,0.0,1.0)+float(bD>0.0)*vec4(0.2,1.0,0.2,1.0)+br(d,1.0,bk,bl)*vec4(1.0,1.0,1.0,1.0)+br(d,1.0,bA,bB)*vec4(1.0,1.0,1.0,0.5);vec4 z=mix(bE,bF,bF.a);return vec4(z.rgb,z.a*0.8);}float bG(float be,float bH,float bI,float bJ){return 1.0/(bH+bI*be+bJ*be*be);}void main(){vec2 d=gl_FragCoord.xy;vec2 J=vec2(0.0);bool bK=false;float H;vec2 bL;vec2 bM;vec4 N;if(!started||gameover){if(gameover){H=64.0;bL=vec2((resolution.x-4.0*H)/2.0,resolution.y-H*1.4);}else{H=140.0;bL=(resolution-vec2(4.4*H,H))/2.0;}bM=vec2(3.0*H,1.6*H);if(ba(d,bL,H)){bK=true;}}if(bK){J+=P(1.0,0.1,2.0);}float bN=0.0;if(started&&!gameover){bN=bc(d,vec3(0.0)).a;if(bN>0.){J+=P(1.6,0.08,3.0);}}vec2 bw=(d+J+camera)/zoom;vec2 bO=floor(bw);vec3 bP=Z(V(bO),bO);vec2 bQ=fract(bw);vec3 z=bP;vec3 bR=vec3(0.02)*vec3(a(zoom*floor(d/zoom)+time/31.0),a(zoom*floor(d/zoom)+time/80.1),a(zoom*floor(d/zoom)+time/13.2));vec3 bS=-vec3(0.03)*(bQ.x-bQ.y);vec4 bT=vec4(0.0);float bU=bG(distance(bb,d),0.0,0.001,0.00001);for(int bj=0;bj<30;++bj){if(bj>=animalsLength) break;vec2 bV=vec2(animals[7*bj+0],animals[7*bj+1]);vec4 z=C(bw,bV,vec2(animals[7*bj+2],animals[7*bj+3]),animals[7*bj+4],animals[7*bj+5],animals[7*bj+6],1.0);float be=distance(bV,bw);bU+=bG(distance(bV,bw),0.0,0.002,0.001);bT=mix(bT,z,z.a);}vec3 bW=z+bR+bS;z=bT.a==0.0?bW:mix(bW,bT.rgb,min(1.0,bT.a));z=mix(z,bw.y<0.0?colors[1]:colors[0],smoothstep(worldSize[0]-100.0,worldSize[0],bw[0]));z*=0.7+0.3*min(1.0,bU);if(bN>0.0){N=bc(d,z);z=mix(z.rgb,N.rgb,N.a);}if(!started||gameover){if(bK){z=1.4*(0.4+0.8*z);}else if(ba(gl_FragCoord.xy,bL+vec2(8.0,-8.0),H)){z=vec3(0.0);}}vec2 bX=d;if(gameover){bX-=(resolution-resolution/vec2(6.0,36.0))/2.;}if(y(score,(bX/resolution)*128.*vec2(1,resolution.y/resolution.x))>0.0){z=mix(vec3(1.0,0.5,0.3),vec3(1.0,0.3,1.0),float(!started))+0.3*(1.0-z);}if(!gameover&&started){N=bg(d,z);z=mix(z.rgb,N.rgb,N.a);float bY=150.0;float bZ=0.015*resolution.x;vec2 ca=d-resolution+vec2(4.0*bZ,2.5);vec4 cb=C(d,resolution-vec2(2.0,3.0)*bZ,vec2(0.0),0.0,0.0,0.0,0.3*bZ);z=mix(z,cb.rgb+0.2-0.3*z,cb.a);if(B(alive,(ca/resolution)*bY*vec2(1,resolution.y/resolution.x))>0.0){z=0.5+0.5*(1.0-z);}if(toRescue>0.0){ca+=vec2(0.0,4.0*bZ);cb=C(d,resolution-vec2(2.0,7.0)*bZ,vec2(0.0),-1.0,0.0,0.0,0.3*bZ);z=mix(z,cb.rgb+0.2-0.3*z,cb.a);if(B(toRescue,(ca/resolution)*bY*vec2(1,resolution.y/resolution.x))>0.0){z=vec3(0.0,1.0,0.0)+0.5*(1.0-z);}}vec2 bv=vec2(resolution.y/6.0)*vec2(worldSize.x/worldSize.y,1.0);vec2 cc=vec2(10.0,resolution.y-10.0);N=bt(d,cc,cc+bv*vec2(1.0,-1.0));z=mix(z,N.rgb,N.a);}gl_FragColor=vec4(z,1.0);}",B="attribute vec2 position;void main(){gl_Position=vec4(2.0*position-1.0,0.0,1.0);}",X="\n#define RAND (S_=vec2(rand(S_), rand(S_+9.))).x\n\n#define AnyADJ(e) (NW==e||SE==e||NE==e||SW==e||NN==e||SS==e||EE==e||WW==e)\nprecision highp float;int a=0;int b=1;int c=2;int d=3;int e=4;int f=5;int g=6;int h=7;int i=8;uniform vec2 size;uniform float seed;uniform float tick;uniform float tickStart;uniform float startX;uniform sampler2D state;uniform bool running;uniform bool draw;uniform ivec2 drawPosition;uniform float drawRadius;uniform int drawObject;int j(int k,int l){vec2 m=(gl_FragCoord.xy+vec2(k,l))/size;return (m.x<0.0||m.x>=1.0||m.y<0.0||m.y>=1.0)?0:int(floor(.5+9.*texture2D(state,m).r));}bool n(float o,float p,float q){return p<=o&&o<=q;}float rand(vec2 r){return fract(sin(dot(r.xy,vec2(12.9898,78.233)))*43758.5453);}float s(vec2 t){return mix(rand(vec2(t.x)),0.5*(1.0+(cos(sin(t.y*0.01+t.x*0.05)+(1.0+0.3*sin(t.x*0.01))*t.y*0.08))),0.6);}bool u(vec2 t){if(tickStart==0.0) return false;float v=600.0;float w=40.0;float x=6.0;float y=tick-tickStart-v-x*startX;float z=floor(y/w);float A=(y-z*w);return distance(x*vec2(2.0*z,A),t)<=x;}void main(){vec2 t=gl_FragCoord.xy;vec2 S_=t+0.001*tick;int NW=j(-1,1);int NN=j(0,1);int NE=j(1,1);int WW=j(-1,0);int CC=j(0,0);int EE=j(1,0);int SW=j(-1,-1);int SS=j(0,-1);int SE=j(1,-1);bool B=CC==b||CC==i||CC==e||CC==f;int C=a;int D=int(20.0*pow(s(t),1.3));float E=mod(tick,300.0);float F=mod(tick,25.0);if(-0.05*float(NW==d)+-0.30*float(NN==d)+-0.05*float(NE==d)+-0.50*float(WW==d)+-0.30*float(CC==d)+-0.50*float(EE==d)+0.35*float(SW==c)+0.90*float(SS==c)+0.35*float(SE==c)>=0.9-0.6*RAND||CC==c&&RAND<0.9&&AnyADJ(i)){C=c;}if(n(0.3*float(NW==d)+0.9*float(NN==d)+0.3*float(NE==d)+0.1*float(WW==d)+-0.3*float(CC==c)+0.1*float(EE==d)+-0.3*float(SS==c),0.9-0.6*RAND,1.4+0.3*RAND)||!B&&RAND<0.98&&((WW==d||NW==d)&&SW==b||(EE==d||NE==d)&&SE==b)||!B&&t.y>=size[1]-1.0&&E<100.0&&n(t.x-(rand(vec2(seed*0.7+tick-E))*size[0]),0.0,100.0*rand(vec2(seed+tick-E)))||!B&&(0.9*float(NW==f)+1.0*float(NN==f)+0.9*float(NE==f)+0.7*float(WW==f)+0.7*float(EE==f)>=1.0-0.3*RAND)){C=d;}if(CC==b){if(!(WW==a&&EE==a)) C=b;if(RAND<0.01&&(1.0*float(NW==d)+1.2*float(NN==d)+1.0*float(NE==d)+0.5*float(WW==d)+0.5*float(EE==d)+0.3*float(SW==d)+0.2*float(SS==d)+0.3*float(SE==d)>=3.0-2.5*RAND)||RAND<0.01&&(WW==f||NN==f||EE==f)){C=f;}if(RAND<0.006+0.02*smoothstep(0.0,10000.0,startX+t.x)&&(0.3*float(NW==c)+0.2*float(SS==c)+0.3*float(NE==c)+0.5*float(WW==c)+0.5*float(EE==c)+1.0*float(SW==c)+1.2*float(NN==c)+1.0*float(SE==c)>=3.0-2.1*RAND)||RAND<0.01+0.02*smoothstep(500.0,5000.0,startX+t.x)&&(int(WW==e)+int(SS==e)+int(EE==e)+int(SE==e)+int(SW==e)>1)){C=e;}}if(D>0){if(CC==i){C=i;if(CC==i&&RAND<0.9&&(AnyADJ(c)||AnyADJ(e))){C=c;}}else if(!B&&(AnyADJ(b)||AnyADJ(i)||AnyADJ(f))){if(RAND<0.04&&j(0,-D)!=i&&(SS==i&&RAND<0.07||SS==b&&RAND<0.02||AnyADJ(d)||AnyADJ(f))){C=i;}}}if((!B||CC==c)&&SS==e){C=c;}if(CC==e){C=e;if(NW==d||NN==d||NE==d||EE==d||WW==d){C=RAND<0.8?f:b;}if(RAND<0.005&&(int(SW==c||SW==e)+int(SS==c||SS==e)+int(SE==c||SE==e)<2)){C=b;}if(int(NW==f)+int(SE==f)+int(NE==f)+int(SW==f)+int(NN==f)+int(SS==f)+int(EE==f)+int(WW==f)>1){C=RAND<0.3?e:(RAND<0.6?f:b);}}if(B&&t.y<=2.0&&F<=1.0&&RAND<0.3&&n(t.x-rand(vec2(seed*0.01+tick-F))*size[0],0.0,10.0*rand(vec2(seed*0.07+tick-F)))){C=e;}if(CC==f){C=f;if(RAND<0.06&&(int(NW==d||NW==f)+int(NN==d||NN==f)+int(NE==d||NE==f)<1)||(EE==c||WW==c||SS==c||SW==c||SE==c)){C=b;}if(AnyADJ(e)){C=RAND<0.2?e:(RAND<0.6?f:b);}}if(C==a){if(RAND<0.00001) C=g;if(RAND<0.00001) C=h;}int G=C==g?g:C==h?h:0;float o=(-0.1+0.05*(RAND-0.5))*float(NW==h)+0.12*float(NE==g)+-0.65*float(WW==h)+0.65*float(EE==g)+-0.1*float(SW==h)+(0.2+0.05*(RAND-0.5))*float(SE==g);if(n(o,0.4*RAND,0.95)){G=g;}else if(n(o,-0.95,-0.4*RAND)){G=h;}if(G!=0){if(C==a){C=G;}else if(C==c){if(RAND<0.4) C=G;}else if(C==d){if(RAND<0.1) C=G;}}if(draw){vec2 H=floor(t);if(distance(H,vec2(drawPosition))<=drawRadius){if(drawObject==d){if(B&&CC!=i){C=f;}else if(!B&&mod(H.x+H.y,2.0)==0.0){C=d;}}else if(drawObject==c){C=B?e:c;}else{C=drawObject;}}}if(u(t)){C=B?e:c;}if(!running){if(C==c||C==d||C==i) C=a;if(C==e||C==f) C=b;}gl_FragColor=vec4(float(C)/9.0,0.0,0.0,1.0);}",G="attribute vec2 position;void main(){gl_Position=vec4(2.0*position-1.0,0.0,1.0);}",I=[[3,,.45,.73,.5,.08,,.04,-.04,.15,.05,,,,,,.3799,.02,.08,,.35,.65,.08,.6],[3,.04,.34,.76,.62,.26,,-.04,-.14,.62,.35,,,.33,.28,,-.06,.3799,.13,-.0999,,.28,-.14,.2],[3,.35,.67,,.52,.12,,,,,,,,,,,.6799,,.25,-.04,,,-.0999,.2]].map(jsfxr),H=[];for(k=0;4>k;++k)H.push(jsfxr([0,.03,.3,.13,.2,.26+k/20,,.1399,,.02,.07,-.06,,.42,,,-.06,-.02,.34,.04,,.28,.06,.2]));var O=[];for(k=0;8>k;++k)O.push(jsfxr([3,.16,.1749,,.22,.05+k/9,,-.16,,,,,,,,,,,.08,-.06,,.8,,.6]));var J=jsfxr([1,.16,.18,,.45,.23,,,.1,.37,.2,.58,.44,,,,,,.3,,.21,.15,.34,.3]),q=jsfxr([0,.11,1,.22,.7,.61,,-.06,-.0799,.21,.28,-.04,.2,.56,-.4,,.28,-.54,.1,-.04,.52,.8,-.02,.5]),Y=jsfxr([0,.11,1,.22,.7,.19,,.12,.02,.29,.41,-.26,.56,.56,-.4,,.28,-.54,.24,-.04,,.8,-.02,.5]),V=30,K=6,Z=Math.random(),Q=document.createElement("canvas"),$=0,te=0,ee=+(localStorage.ibex||0),re=ee,ae=new Image;ae.src="t.png";var oe,ie,ne,fe,ce,le=35,de=300,ve=8,se=[.11,.16,.23,.74,.66,.51,.84,.17,.08,.4,.75,.9,.6,0,0,.3,.6,.7,.15,.2,.27,.07,.12,.19,.2,.6,.2],me=0,be=0,ue=0,he=90,xe=[3*he,256],ge=10,Ee=150,Ae=new Uint8Array(xe[0]*xe[1]*4),Se=new Uint8Array(xe[0]*xe[1]),Ne=0,we=8,De=[0,0],Re=[0,0],ye=[0,0],pe=0,Ce=1,Te=K,Ue=[];c(),Q.addEventListener("mouseleave",c),Q.addEventListener("mousedown",function(t){t.preventDefault(),$&&!te&&(dragStart=f(t),dragCam=!d(dragStart),selectElStart=l(dragStart),camStart=[].concat(De))}),Q.addEventListener("mouseup",function(t){if($||p(),$&&!te){if(-1!=selectElStart){var e=l(f(t));selectElStart==e&&(Ce=selectElStart)}c()}}),Q.addEventListener("mousemove",function(t){if($&&!te){var e=l(ye=f(t));if(Q.style.cursor=dragStart?dragCam?"move":"none":d(ye)||-1!=e?"pointer":"default",dragStart){var r=ye[0]-dragStart[0],a=ye[1]-dragStart[1];n(dragCam?[camStart[0]-r,camStart[1]-a]:[camStart[0]+r,camStart[1]+a])}}});var ze=0;onwheel=onmousewheel=function(t){var e=~~((ze+=t.deltaY)/100);Ce=(16+Ce+e)%4,ze-=100*e};var Me,We=new Uint8Array(200),_e=Date.now();document.addEventListener("keyup",function(t){var e=t.which;We[e]=0,(e>=37&&40>=e||87==e||90==e||88==e||67==e||86==e)&&m()}),document.addEventListener("keydown",function(t){var e=t.which;We[e]=1,(e>=37&&40>=e||87==e||90==e||88==e||67==e||86==e)&&(t.preventDefault(),m())});var Le,Fe,ke,je,Pe=32,Be=18,Xe=Pe/2,Ge=Be/2,Ie=Q.getContext("webgl")||Q.getContext("experimental-webgl");je=Ie.createProgram(),Fe=B,ke=Ie.VERTEX_SHADER,Le=Ie.createShader(ke),Ie.shaderSource(Le,Fe),Ie.compileShader(Le),M(Le,Fe),Ie.attachShader(je,Le),Fe=P,ke=Ie.FRAGMENT_SHADER,Le=Ie.createShader(ke),Ie.shaderSource(Le,Fe),Ie.compileShader(Le),M(Le,Fe),Ie.attachShader(je,Le),Ie.linkProgram(je),W(je),Ie.useProgram(je);var He=Ie.createBuffer(),Oe=Ie.getAttribLocation(je,"position");Ie.enableVertexAttribArray(Oe),Ie.bindBuffer(Ie.ARRAY_BUFFER,He),Ie.vertexAttribPointer(Oe,2,Ie.FLOAT,!1,0,0),(onresize=function(){var t=[window.innerWidth,window.innerHeight];oe=t;var e=Math.min(t[0],1024),r=~~(e*t[0]/t[1]);ie=[r,e],Q.style.width=t[0]+"px",Q.style.height=t[1]+"px",Q.width=ie[0],Q.height=ie[1],Ie.viewport(0,0,Q.width,Q.height);var a=0,o=0,i=ie[0],n=ie[1];Ie.bufferData(Ie.ARRAY_BUFFER,new Float32Array([a,o,i,o,a,n,a,n,i,o,i,n]),Ie.STATIC_DRAW),Ie.uniform2fv(dr,ie)})();var Je=Ie.getUniformLocation(je,"time"),qe=Ie.getUniformLocation(je,"alive"),Ye=Ie.getUniformLocation(je,"toRescue"),Ve=Ie.getUniformLocation(je,"zoom"),Ke=Ie.getUniformLocation(je,"started"),Ze=Ie.getUniformLocation(je,"gameover"),Qe=Ie.getUniformLocation(je,"score"),$e=Ie.getUniformLocation(je,"state"),tr=Ie.getUniformLocation(je,"worldSize"),er=Ie.getUniformLocation(je,"animals"),rr=Ie.getUniformLocation(je,"animalsLength"),ar=Ie.getUniformLocation(je,"tiles"),or=Ie.getUniformLocation(je,"colors"),ir=Ie.getUniformLocation(je,"drawObject"),nr=Ie.getUniformLocation(je,"drawRadius"),fr=Ie.getUniformLocation(je,"camera"),cr=Ie.getUniformLocation(je,"mouse"),lr=Ie.getUniformLocation(je,"drawing"),dr=Ie.getUniformLocation(je,"resolution"),vr=Ie.createTexture();ae.onload=function(){Ie.useProgram(sr),Ie.activeTexture(Ie.TEXTURE1),Ie.bindTexture(Ie.TEXTURE_2D,vr),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_S,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_T,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MIN_FILTER,Ie.NEAREST),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MAG_FILTER,Ie.NEAREST),Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,Ie.RGBA,Ie.UNSIGNED_BYTE,ae),Ie.uniform1i(ar,1),Ie.activeTexture(Ie.TEXTURE0)},Ie.uniform1i($e,0),Ie.uniform3fv(or,se);var sr=je;je=Ie.createProgram(),Fe=G,ke=Ie.VERTEX_SHADER,Le=Ie.createShader(ke),Ie.shaderSource(Le,Fe),Ie.compileShader(Le),M(Le,Fe),Ie.attachShader(je,Le),Fe=X,ke=Ie.FRAGMENT_SHADER,Le=Ie.createShader(ke),Ie.shaderSource(Le,Fe),Ie.compileShader(Le),M(Le,Fe),Ie.attachShader(je,Le),Ie.linkProgram(je),W(je);var mr=Ie.getUniformLocation(je,"seed"),br=Ie.getUniformLocation(je,"running"),ur=Ie.getUniformLocation(je,"tick"),hr=Ie.getUniformLocation(je,"startX"),xr=Ie.getUniformLocation(je,"tickStart"),gr=Ie.getUniformLocation(je,"state"),Er=Ie.getUniformLocation(je,"size"),Ar=Ie.getUniformLocation(je,"draw"),Sr=Ie.getUniformLocation(je,"drawPosition"),Nr=Ie.getUniformLocation(je,"drawObject"),wr=Ie.getUniformLocation(je,"drawRadius"),Dr=Ie.getAttribLocation(je,"position");Ie.enableVertexAttribArray(Dr);var Rr=Ie.createTexture();Ie.activeTexture(Ie.TEXTURE0),Ie.bindTexture(Ie.TEXTURE_2D,Rr),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_MIN_FILTER,Ie.LINEAR),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_S,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_2D,Ie.TEXTURE_WRAP_T,Ie.CLAMP_TO_EDGE);var yr=Ie.createFramebuffer();Ie.bindFramebuffer(Ie.FRAMEBUFFER,yr),Ie.framebufferTexture2D(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Ie.TEXTURE_2D,Rr,0),Ie.useProgram(je),Ie.uniform1f(mr,Z),Ie.uniform1i(gr,0);var pr=je;N(0);var Cr=new Uint8Array(100);for(L=0;100>L;++L)for(var F=xe[1]-1;F>0;F--)if(b(Se[L+F*xe[0]])){Cr[L]=F;break}var Tr=Date.now(),Ur=0,zr=0;document.body.innerHTML="",document.body.appendChild(Q),T()},300);